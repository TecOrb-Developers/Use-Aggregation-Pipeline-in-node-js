"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _mscartesian=_interopRequireDefault(require("../_internal/mscartesian"));var _marimekko=_interopRequireDefault(require("../../dataset/marimekko"));var _marimekkoStack=_interopRequireDefault(require("../../dataset/groups/marimekko-stack"));var _multiseriesDataset=_interopRequireDefault(require("../../factories/multiseries-dataset"));var _lib=require("@fusioncharts/core/src/lib");var MARIMEKKO_CHART="Marimekko Chart",MARIMEKKO_STR="marimekko";var Marimekko=function(_MSCartesian){(0,_inheritsLoose2.default)(Marimekko,_MSCartesian);Marimekko.getName=function getName(){return"Marimekko"};var _proto=Marimekko.prototype;_proto._checkInvalidSpecificData=function _checkInvalidSpecificData(){var jsonData=this.getFromEnv("dataSource"),datasetsJSON=jsonData.dataset,categories=jsonData.categories;if(!datasetsJSON||!categories||categories.length===0||!categories[0].category||!(categories[0].category instanceof Array)){return true}};function Marimekko(){var _this;_this=_MSCartesian.call(this)||this;_this.isValueAbs=true;_this.distributedColumns=true;_this.stack100percent=true;_this.isStacked=true;_this.registerFactory("dataset",(function(chart){(0,_multiseriesDataset.default)(chart);var children=chart.getChildren(),canvas=children.canvas[0],vCanvas=canvas.getChildren("vCanvas")[0],dsType=chart.config.defaultDatasetType||"",manager=vCanvas.getChildren("datasetGroup_"+dsType)[0];manager.addToEnv("categories",chart.getFromEnv("dataSource").categories)}),["vCanvas"]);return _this}_proto.getName=function getName(){return"Marimekko"};_proto.parseChartAttr=function parseChartAttr(dataObj){_MSCartesian.prototype.parseChartAttr.call(this,dataObj);this.config.showXAxisPercentValues=(0,_lib.pluckNumber)(dataObj.chart&&dataObj.chart.showxaxispercentvalues,1)};_proto.__setDefaultConfig=function __setDefaultConfig(){_MSCartesian.prototype.__setDefaultConfig.call(this);var config=this.config;config.friendlyName=MARIMEKKO_CHART;config.defaultDatasetType=MARIMEKKO_STR;config.isstacked=true;config.showpercentvalues=0;config.usepercentdistribution=1;config.showSum=1;config.enablemousetracking=true};_proto.getDSdef=function getDSdef(){return _marimekko.default};_proto.getDSGroupdef=function getDSGroupdef(){return _marimekkoStack.default};return Marimekko}(_mscartesian.default);var _default=Marimekko;exports.default=_default;