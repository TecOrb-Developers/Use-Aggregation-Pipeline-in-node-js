"use strict";exports.__esModule=true;exports.default=_default;var _lib=require("@fusioncharts/core/src/lib");var PIPE="|",removeDataset=function removeDataset(component){component&&component.iterateComponents((function(child){if(child.getType()==="dataset"){child.remove()}}))};function _default(chart){var jsonData=chart.getFromEnv("dataSource"),chartDef=jsonData.chart||{},cdm,cdmchar,chartConfig=chart.config,datasetsJSON=jsonData.dataset,dataSet,children=chart.getChildren(),canvas=children.canvas[0],i,data,j,tempArr,len,datasetJSON,parentyaxis,indices1=[],indices2=[],confArr1=[],confArr2=[],vCanvasArr=canvas.getChildren("vCanvas");chartConfig.cdm=cdm=(0,_lib.pluckNumber)(chartDef.compactdatamode,0);chartConfig.cdmchar=cdmchar=(0,_lib.pluck)(chartDef.dataseparator,PIPE);if(!datasetsJSON){chart.setChartMessage()}for(i=0;i<datasetsJSON.length;i++){dataSet=datasetsJSON[i];if(cdm){if(dataSet.data&&dataSet.data.split){tempArr=dataSet.data.split(cdmchar);data=[];for(j=0,len=tempArr.length;j<len;j++){data.push({value:tempArr[j]})}dataSet.data=data}}}for(i=0;i<datasetsJSON.length;i++){datasetJSON=datasetsJSON[i];parentyaxis=datasetJSON.parentyaxis||"";if(parentyaxis.toLowerCase()==="s"){confArr2.push(datasetJSON);indices2.push(i)}else{confArr1.push(datasetJSON);indices1.push(i)}}if(confArr1.length){(0,_lib.datasetFactory)(vCanvasArr[0],chart.getDSdef(),"dataset_line",confArr1.length,confArr1,indices1)}else{removeDataset(vCanvasArr[0])}if(confArr2.length){(0,_lib.datasetFactory)(vCanvasArr[1],chart.getDSdef(),"dataset_line",confArr2.length,confArr2,indices2)}else{removeDataset(vCanvasArr[1])}chart.iterateComponents((function(child){if(child.getType&&child.getType()==="dataset"){child.createPinElem&&child.addEventListener("createpinelements",child.createPinElem)}}))}