"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=_default;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _index=require("@fusioncharts/core/src/lib/index.js");var _arrayHasContent=_interopRequireDefault(require("@fusioncharts/utils/src/type/array-has-content.js"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))}keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}var TRUE_STRING="true",ONE_STRING="1",_dataSegregator=function _dataSegregator(data){var dataOnlyArr=[],catOnlyArr=[];(0,_index.fcEach)(data,(function(datum,i){if(!(datum.vline===TRUE_STRING||datum.vline===true||datum.vline===1||datum.vline===ONE_STRING)){dataOnlyArr.push(datum)}else{catOnlyArr.push({index:i,data:datum});dataOnlyArr.push(datum)}}));return{catData:catOnlyArr,data:dataOnlyArr}};function _default(chart){var children=chart.getChildren(),canvas=children.canvas&&children.canvas[0],vCanvas=canvas&&canvas.getChildren("vCanvas"),datasetParent=vCanvas&&vCanvas[0]||canvas||chart,dataObj=chart.getFromEnv("dataSource"),dataset=dataObj.dataset,sparkData=(0,_arrayHasContent.default)(dataset)&&dataset[0].data,data=dataObj.data||sparkData,DSClass,datasetJSON;if(sparkData){datasetJSON=_objectSpread(_objectSpread({},dataset[0]),_dataSegregator(data))}else{datasetJSON=_dataSegregator(data)}if(!(data&&data.length!==0)){chart.setChartMessage();return}DSClass=chart.getDSdef();(0,_index.datasetFactory)(datasetParent,DSClass,"dataset",1,[datasetJSON])}