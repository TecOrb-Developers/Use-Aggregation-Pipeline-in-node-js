"use strict";exports.__esModule=true;exports.default=void 0;var lib={init:function init(win){var doc=win.document,nav=win.navigator,userAgent=nav.userAgent,DIV="DIV",ceil=Math.ceil,floor=Math.floor,clsNameSpace="fusioncharts-smartlabel-",containerClass=clsNameSpace+"container",classNameWithTag=clsNameSpace+"tag",classNameWithTagBR=clsNameSpace+"br";lib={win:win,containerClass:containerClass,classNameWithTag:classNameWithTag,classNameWithTagBR:classNameWithTagBR,maxDefaultCacheLimit:1e3,classNameReg:/\bfusioncharts-smartlabel-tag\b/,classNameBrReg:/\bfusioncharts-smartlabel-br\b/,spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+classNameWithTag+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+classNameWithTag+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),brRegex:new RegExp("({br[ ]*})|(<br[ ]*>)|(<br[ ]*/>)|(<BR[ ]*/>)|(<br\\>)","g"),ltgtquotRegex:/&lt;|&gt;|&quot;|&#034;|&#039;/g,nbspRegex:/&nbsp;|&#160;|&#xA0;/g,htmlSpecialEntityRegex:/&amp;|&quot;|&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function getDocumentSupport(){var childRetriverFn,childRetriverString,noClassTesting;if(doc.getElementsByClassName){childRetriverFn="getElementsByClassName";childRetriverString=classNameWithTag;noClassTesting=true}else{childRetriverFn="getElementsByTagName";childRetriverString="span";noClassTesting=false}return{isIE:/msie/i.test(userAgent)&&!win.opera,hasSVG:Boolean(win.SVGAngle||doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(userAgent),isWebKit:new RegExp(" AppleWebKit/").test(userAgent),childRetriverFn:childRetriverFn,childRetriverString:childRetriverString,noClassTesting:noClassTesting}},createContainer:function createContainer(containerParent){var body,container;if(containerParent&&(containerParent.offsetWidth||containerParent.offsetHeight)){if(containerParent.appendChild){containerParent.appendChild(container=doc.createElement(DIV));container.className=containerClass;container.setAttribute("aria-hidden","true");container.setAttribute("role","presentation");return container}}else{body=doc.getElementsByTagName("body")[0];if(body&&body.appendChild){container=doc.createElement(DIV);container.className=containerClass;container.setAttribute("aria-hidden","true");container.setAttribute("role","presentation");body.appendChild(container);return container}}},getNearestBreakIndex:function getNearestBreakIndex(text,maxWidth,sl){if(!text||!text.length){return 0}var difference,getWidth=sl._getWidthFn(),charLen=0,increment=0,oriWidth=getWidth(text),avgWidth=oriWidth/text.length;difference=maxWidth;charLen=ceil(maxWidth/avgWidth);if(oriWidth<maxWidth){return text.length-1}if(charLen>text.length){difference=maxWidth-oriWidth;charLen=text.length}while(difference>0){difference=maxWidth-getWidth(text.substr(0,charLen));increment=floor(difference/avgWidth);if(increment){charLen+=increment}else{return charLen}}while(difference<0){difference=maxWidth-getWidth(text.substr(0,charLen));increment=floor(difference/avgWidth);if(increment){charLen+=increment}else{return charLen}}return charLen},parseStyle:function parseStyle(style){if(style===void 0){style={}}var parsedStyle={};parsedStyle.fontSize=(style.fontSize||style["font-size"]||"12px")+"";parsedStyle.fontVariant=style.fontVariant||style["font-variant"]||"normal";parsedStyle.fontWeight=style.fontWeight||style["font-weight"]||"normal";parsedStyle.fontStyle=style.fontStyle||style["font-style"]||"normal";parsedStyle.fontFamily=style.fontFamily||style["font-family"]||"Verdana,sans";parsedStyle.fontSize+=parsedStyle.fontSize.indexOf("px")===-1?"px":"";return parsedStyle},setLineHeight:function setLineHeight(styleObj){var fSize=styleObj.fontSize;styleObj.lineHeight=styleObj.lineHeight||styleObj["line-height"]||parseInt(fSize,10)*1.2+"px";return styleObj},_getCleanHeight:function _getCleanHeight(height){height=height.replace(/px/g,"");return Number(height)},_getDimentionUsingDiv:function _getDimentionUsingDiv(text,sl){if(text===void 0){text=""}var container=sl._container;if(text instanceof Array){text=text.join("")}container.innerHTML=text;return{width:container.offsetWidth,height:container.offsetHeight}},_getDimentionUsingCanvas:function _getDimentionUsingCanvas(text,sl){if(text===void 0){text=""}var ctx=sl.ctx,style=sl.style,height=lib._getCleanHeight(style.lineHeight);if(!(text instanceof Array)){text=text.replace(/<br \/>/g,"")}else{text=text.join("");text=text.replace(/<br \/>/g,"")}return{width:ctx.measureText(text).width,height:height}},_hasOnlyBRTag:function _hasOnlyBRTag(input){if(input===void 0){input=""}return!lib.xmlTagRegEx.test(input)&&lib.brRegex.test(input)},_getDimentionOfMultiLineText:function _getDimentionOfMultiLineText(rawText,sl){if(rawText===void 0){rawText=""}var i,len,text=rawText.replace(lib.brRegex,"<br />"),textAr=lib._getTextArray(text),width=0,maxWidth=0,getWidth=sl._getWidthFn(),height=lib._getCleanHeight(sl.style.lineHeight),textHeight=height,textWidth,indiSizeStore={};for(i=0,len=textAr.length;i<len;i++){if(textAr[i]==="<br />"){maxWidth=Math.max(maxWidth,width);width=0;textHeight+=height}else{textWidth=getWidth(textAr[i]);width+=textWidth;indiSizeStore[textAr[i]]=textWidth}}maxWidth=Math.max(maxWidth,width);return{height:textHeight,width:maxWidth,detailObj:indiSizeStore}},_getTextArray:function _getTextArray(text){if(text===void 0){text=""}var i,j,len,tempLen,brText,tempText,finaltextAr=[];brText=text.split("<br />");len=brText.length;for(i=0;i<len;i++){tempText=brText[i].split("");tempLen=tempText.length;for(j=0;j<tempLen;j++){finaltextAr.push(tempText[j])}if(i!==len-1){finaltextAr.push("<br />")}}return finaltextAr},_findLastIndex:function _findLastIndex(array,item){if(array===void 0){array=[]}var i,len=array.length;for(i=len-1;i>=0;i--){if(array[i]===item){return i}}return-1}};return lib}};var _default=lib;exports.default=_default;