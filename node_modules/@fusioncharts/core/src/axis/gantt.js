"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports._drawScrollBar=_drawScrollBar;exports.getCrispPath=exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _safeMin=_interopRequireDefault(require("@fusioncharts/utils/src/array/safe-min"));var _safeMax=_interopRequireDefault(require("@fusioncharts/utils/src/array/safe-max"));var _componentInterface=require("../component-interface");var _lib=require("../lib");var _dependencyManager=require("../dependency-manager");var UNDEF,R=(0,_dependencyManager.getDep)("redraphael","plugin"),PXSTRING="px",DASH_DEF="none",NORMALSTRING="normal",TREND="trend",CAT_VLINE="catVLine",LABEL="label",LINE="line",BAND="band",CAT_BAND="catBand",TREND_LINE_COLOR="333333",pInt=function pInt(s,mag){return parseInt(s,mag||10)},createGroup=function createGroup(groupName,parentContainer,axis){return axis.getFromEnv("animationManager").setAnimation({el:"group",attr:{name:groupName},container:parentContainer,state:"appearing",component:axis,label:"group"})},roundToMultiple=function roundToMultiple(num,multiple){if(multiple===void 0){multiple=0}var remainder;if(multiple===0)return num;remainder=Math.abs(num)%multiple;if(remainder===0)return num;if(num<0)return-(Math.abs(num)-remainder);return num+multiple-remainder},getCrispPath=function getCrispPath(path,width){var isCrisped=false,oddWidth=width%2,value,roundValue;if(path[1]===path[4]){value=path[1];roundValue=Math.round(value);path[1]=path[4]=oddWidth?roundValue>value?roundValue-.5:roundValue+.5:roundValue;isCrisped=true}if(path[2]===path[5]){value=path[2];roundValue=Math.round(value);path[2]=path[5]=oddWidth?roundValue>value?roundValue-.5:roundValue+.5:roundValue;isCrisped=true}return{path:path,isCrisped:isCrisped}},_forceValidLowerLimit=function _forceValidLowerLimit(value,limit){return value<limit?limit:value},_drawLimitUpdater=function _drawLimitUpdater(limitUpdater){limitUpdater.draw()};exports.getCrispPath=getCrispPath;function sanitiseComponentName(name){var sanitisedName=_lib.BLANKSTRING;if(name===TREND||name===TREND+"s"){sanitisedName=TREND}if(name===CAT_VLINE||name===CAT_VLINE+"s"){sanitisedName=CAT_VLINE}if(name===LABEL||name===LABEL+"s"){sanitisedName=LABEL+"s"}if(name===LINE||name===LINE+"s"){sanitisedName=LINE+"s"}if(name===BAND||name===BAND+"s"){sanitisedName=BAND}if(name===CAT_BAND||name===CAT_BAND+"s"){sanitisedName=CAT_BAND}return sanitisedName}function _drawScrollBar(){var axis=this,chart=axis.getFromEnv("chart"),chartConfig=chart.config,graphics=chart.graphics,axisConfig=axis.config,axisRange=axisConfig.axisRange,scrollOptions=chartConfig.scrollOptions||(chartConfig.scrollOptions={}),max=axisRange.max,min=axisRange.min,scrollBar=axis.getLinkedItem("scrollBar"),scrollNode=scrollBar&&scrollBar.config.node,canvasLeft,canvasTop,canvasHeight,canvasConfig=chart.getChildren("canvas")[0].config,canvasBorderWidth,axisLineWidth,axisLineStartExtension,axisLineEndExtension,scrollRatio,windowedCanvasWidth,fullCanvasWidth,scrollBarParentGroup,visibleConfig,visibleRange,totalRange,scrollPosition;if(!scrollBar){return}canvasLeft=canvasConfig.canvasLeft;canvasTop=canvasConfig.canvasTop;canvasHeight=canvasConfig.canvasHeight;canvasBorderWidth=canvasConfig.canvasBorderWidth;axisLineWidth=axisConfig.showAxisLine?axisConfig.axisLineThickness||0:0;axisLineStartExtension=(0,_lib.pluckNumber)(canvasBorderWidth,axisConfig.lineStartExtension);axisLineEndExtension=(0,_lib.pluckNumber)(canvasBorderWidth,axisConfig.lineEndExtension);scrollOptions.viewPortMin=min;scrollOptions.viewPortMax=max;visibleConfig=axis.getVisibleConfig();visibleRange=visibleConfig.maxValue-visibleConfig.minValue;totalRange=axisRange.max-axisRange.min;scrollRatio=visibleRange/totalRange;scrollPosition=(visibleConfig.minValue-axisRange.min)/(totalRange-visibleRange);windowedCanvasWidth=scrollOptions.windowedCanvasWidth=axis.getPixel(scrollOptions.vxLength);fullCanvasWidth=scrollOptions.fullCanvasWidth=axis.getPixel(max-min)-windowedCanvasWidth;scrollBarParentGroup=graphics.scrollBarParentGroup;if(!scrollBarParentGroup){scrollBarParentGroup=graphics.scrollBarParentGroup=createGroup("scrollBarParentGroup",graphics.parentGroup).insertBefore(chart.getChildContainer().datalabelsGroup)}if(axisConfig.scrollEnabled!==false){if(axisConfig.isVertical){scrollBar.draw(canvasLeft,canvasTop,{height:canvasHeight,scrollRatio:scrollRatio,roundEdges:canvasConfig.isRoundEdges,fullCanvasWidth:fullCanvasWidth,windowedCanvasWidth:windowedCanvasWidth,scrollPosition:scrollPosition,parentLayer:scrollBarParentGroup})}else{scrollBar.draw(canvasLeft-axisLineStartExtension,canvasTop+canvasHeight+canvasBorderWidth+axisLineWidth-2,{width:canvasConfig.canvasWidth+axisLineStartExtension+axisLineEndExtension,scrollRatio:scrollRatio,roundEdges:canvasConfig.isRoundEdges,fullCanvasWidth:fullCanvasWidth,windowedCanvasWidth:windowedCanvasWidth,scrollPosition:scrollPosition,parentLayer:scrollBarParentGroup})}!scrollNode&&function(){var prevPos;R.eve.on("raphael.scroll.start."+scrollBar.config.node.id,(function(pos){axis.setState("scrolling",true);prevPos=pos;chart.fireChartInstanceEvent("scrollstart",{scrollPosition:pos})}));R.eve.on("raphael.scroll.end."+scrollBar.config.node.id,(function(pos){axis.setState("scrolling",false);chart.fireChartInstanceEvent("scrollend",{prevScrollPosition:prevPos,scrollPosition:pos})}))}()}else{scrollBar&&scrollBar.node&&scrollBar.node.hide()}axisConfig.scrollBarDrawn=true}var CartesianAxis=function(_ComponentInterface){(0,_inheritsLoose2.default)(CartesianAxis,_ComponentInterface);function CartesianAxis(){var _this;_this=_ComponentInterface.call(this)||this;_this._drawScrollBar=_drawScrollBar;return _this}var _proto=CartesianAxis.prototype;_proto.getType=function getType(){return"axis"};_proto.getName=function getName(){return"cartesian"};_proto.__setDefaultConfig=function __setDefaultConfig(){_ComponentInterface.prototype.__setDefaultConfig.call(this);var config=this.config;config.setAdaptiveMin=0;config.adjustDiv=1;config.axisNameWidth=UNDEF;config.rotateAxisName=0;config.useEllipsesWhenOverflow=1;config.divLineColor=UNDEF;config.divLineAlpha=UNDEF;config.divLineThickness=UNDEF;config.divLineIsDashed=UNDEF;config.divLineDashLen=UNDEF;config.divLineDashGap=UNDEF;config.showAlternateGridColor=UNDEF;config.alternateGridColor=UNDEF;config.alternateGridAlpha=UNDEF;config.showZeroPlane=1;config.zeroPlaneAlpha=80;config.showZeroPlaneValue=1;config.showZeroPlaneOnTop=1;config.showAxisLine=UNDEF;config.axisLineThickness=UNDEF;config.axisLineAlpha=UNDEF;config.tickLength=UNDEF;config.trendlineToolText=UNDEF;config.trendlineColor=TREND_LINE_COLOR;config.trendlineThickness=1;config.trendlineAlpha=UNDEF;config.showTrendlinesOnTop=0;config.trendlinesAreDashed=0;config.trendlinesDashLen=5;config.trendlinesDashGap=2;config.isTrendZone=UNDEF;config.showTrendlines=1;config.showTrendlineLabels=1;config.showLabels=1;config.maxLabelHeight=UNDEF;config.rotateLabels=UNDEF;config.slantLabel=0;config.showAxisValues=1;config.showTooltip=1;config.isActive=true;config.drawLabels=true;config.drawOnlyCategoryLine=false;config.drawLabelsOpposit=false;config.drawPlotlines=true;config.drawAxisLine=true;config.drawPlotBands=true;config.drawAxisName=true;config.drawAxisNameOpposit=false;config.axisNameAlignCanvas=false;config.drawAxisNameFromBottom=false;config.drawTrendLines=true;config.drawTrendLabels=true;config.drawTick=true;config.drawTickMinor=true;config.animateAxis=true;config.drawAxisLineWRTCanvas=true;config.isRelativeAxisInverse=false;config.axisIndex=0;config.uniqueClassName=0;config.viewPortRatio={};config.canvas={};config.axisRange={};config.isConfigured=true;config.axisDimention={};config.extremeLabels={firstLabel:{},lastLabel:{}};config._setRangeAgain=false;config._defaultForceDecimal=UNDEF;config._defaultDecimalPrecision=UNDEF;config.rangeChanged=false;config.dimensionChanged=false;config.apparentScrollPos=0;this.addToEnv("componentInfo",{catVLine:[],trend:[],labels:[],lines:[],bands:[],catBand:[]})};_proto.configure=function configure(rawAttr){var axis=this,axisConfig=axis.config,chart=axis.getFromEnv("chart"),is3D=axis.getFromEnv("chart").config.is3D,FCChartObj=chart.getFromEnv("dataSource").chart,numberFormatter=axis.getFromEnv("number-formatter"),tempAxis=axis.getFromEnv("tempAxis"),axisAttr,fontBdrColor,trendFontBdrColor,labelFontBdrColor,i,j,axisAttrTrend,rawAttrTrend;axisAttr=axisConfig.rawAttr=rawAttr;if(rawAttr.vtrendlines){for(i=0;i<rawAttr.vtrendlines.length;++i){for(j=0;j<rawAttr.vtrendlines[i].line.length;++j){axisAttrTrend=axisAttr.vtrendlines[i].line[j];rawAttrTrend=rawAttr.vtrendlines[i].line[j];axisAttrTrend.startvalue=(0,_lib.pluckNumber)(rawAttrTrend.startvalue,UNDEF);axisAttrTrend.endvalue=(0,_lib.pluckNumber)(rawAttrTrend.endvalue,rawAttrTrend.startvalue);axisAttrTrend.color=(0,_lib.pluck)(rawAttrTrend.color,"FFFFFF");axisAttrTrend.istrendzone=(0,_lib.pluckNumber)(rawAttrTrend.istrendzone,1);axisAttrTrend.thickness=(0,_lib.pluckNumber)(rawAttrTrend.thickness,1);axisAttrTrend.trendTextAlpha=(0,_lib.pluckNumber)(rawAttrTrend.alpha,axisConfig.trendlineAlpha,99);axisAttrTrend.alpha=(0,_lib.pluckNumber)(rawAttrTrend.alpha,40);axisAttrTrend.tooltext=(0,_lib.pluck)(rawAttrTrend.tooltext,"")}}}if(rawAttr.trendlines){for(i=0;i<rawAttr.trendlines.length;++i){for(j=0;j<rawAttr.trendlines[i].line.length;++j){axisAttrTrend=axisAttr.trendlines[i].line[j];rawAttrTrend=rawAttr.trendlines[i].line[j];axisAttrTrend.startvalue=(0,_lib.pluckNumber)(rawAttrTrend.startvalue,UNDEF);axisAttrTrend.endvalue=(0,_lib.pluckNumber)(rawAttrTrend.endvalue,rawAttrTrend.startvalue);axisAttrTrend.color=(0,_lib.pluck)(rawAttrTrend.color,"FFFFFF");axisAttrTrend.istrendzone=(0,_lib.pluckNumber)(rawAttrTrend.istrendzone,1);axisAttrTrend.thickness=(0,_lib.pluckNumber)(rawAttrTrend.thickness,1);axisAttrTrend.trendTextAlpha=(0,_lib.pluckNumber)(rawAttrTrend.alpha,axisConfig.trendlineAlpha,99);axisAttrTrend.alpha=(0,_lib.pluckNumber)(rawAttrTrend.alpha,40);axisAttrTrend.showOnTop=(0,_lib.pluckNumber)(rawAttrTrend.showOnTop,1);axisAttrTrend.valueOnRight=(0,_lib.pluckNumber)(rawAttrTrend.valueOnRight,0)}}}axisConfig.trendLines=axisAttr.trendlines;axisConfig.vTrendLines=axisAttr.vtrendlines;(0,_lib.parseConfiguration)(axisAttr,axisConfig);axisConfig.axisName=(0,_lib.parseUnsafeString)(axisAttr.axisName);axisConfig.axisValuePadding=axisConfig.axisNamePadding||(0,_lib.pluckNumber)(axisAttr.axisValuePadding,4);axisConfig.axisNamePadding=axisConfig.axisNamePadding||(0,_lib.pluckNumber)(axisAttr.axisNamePadding,5);axisConfig.maxLabelWidthPercent=(0,_lib.pluckNumber)(axisAttr.maxLabelWidthPercent);axisConfig.maxLabelWidthPercent=Math.abs(axisConfig.maxLabelWidthPercent);axisConfig.minLabelWidthPercent=Math.abs((0,_lib.pluckNumber)(axisAttr.minLabelWidthPercent));axisConfig.numDivLines=(0,_lib.pluckNumber)(axisAttr.numDivLines,4);axisConfig.numDivLines=_forceValidLowerLimit(axisConfig.numDivLines,0);axisConfig.categoryNumDivLines=(0,_lib.pluckNumber)(axisAttr.numDivLines,0);axisConfig.axisValuePadding=_forceValidLowerLimit(axisConfig.axisValuePadding,0);axisConfig.isReverse=Number(axisAttr.isReverse,0);axisConfig.isOpposit=Number(axisAttr.isOpposit,0);axisConfig.isVertical=Number(axisAttr.isVertical,0);axisConfig.categoryDivLinesFromZero=1;axisConfig.axisMinValue=numberFormatter.getCleanValue(axisAttr.axisMinValue);axisConfig.axisMaxValue=numberFormatter.getCleanValue(axisAttr.axisMaxValue);axisConfig.zeroPlaneColor=(0,_lib.pluck)(axisAttr.zeroPlaneColor,axisAttr.divLineColor);axisConfig.zeroPlaneThickness=(0,_lib.pluck)(axisAttr.zeroPlaneThickness,axisAttr.divLineThickness);axisConfig.axisLineColor=(0,_lib.convertColor)(axisAttr.axisLineColor,axisAttr.axisLineAlpha);axisConfig.tickAlpha=(0,_lib.pluckNumber)(axisAttr.tickAlpha,axisConfig.axisLineAlpha);axisConfig.tickColor=(0,_lib.convertColor)((0,_lib.pluck)(axisAttr.tickColor,axisAttr.axisLineColor),axisConfig.tickAlpha);axisConfig.tickWidth=(0,_lib.pluckNumber)(axisAttr.tickWidth,axisConfig.axisLineThickness);axisConfig.maxZoomLimit=(0,_lib.pluckNumber)(FCChartObj.maxzoomlimit,chart.maxzoomlimit,1e3);axisConfig.showVLines=(0,_lib.pluckNumber)(FCChartObj.showvlines,1);axisConfig.showVLinesOnTop=(0,_lib.pluckNumber)(FCChartObj.showvlinesontop,0);axisConfig.showVLineLabels=(0,_lib.pluckNumber)(FCChartObj.showvlinelabels,this.showVLineLabels,1);axisConfig.showVLineLabelBorder=(0,_lib.pluckNumber)(FCChartObj.showvlinelabelborder,1);axisConfig.rotateVLineLabels=(0,_lib.pluckNumber)(FCChartObj.rotatevlinelabels,0);axisConfig.vLineColor=(0,_lib.pluck)(FCChartObj.vlinecolor,"333333");axisConfig.vLineLabelColor=(0,_lib.pluck)(FCChartObj.vlinelabelcolor);axisConfig.vLineThickness=(0,_lib.pluck)(FCChartObj.vlinethickness,1);axisConfig.vLineAlpha=(0,_lib.pluckNumber)(FCChartObj.vlinealpha,80);axisConfig.vLineLabelBgColor=(0,_lib.pluck)(FCChartObj.vlinelabelbgcolor,"ffffff");axisConfig.vLineLabelBgAlpha=(0,_lib.pluckNumber)(FCChartObj.vlinelabelbgalpha,is3D?50:100);axisConfig.staggerLines=Math.max((0,_lib.pluckNumber)(FCChartObj.staggerlines,2),2);axisConfig.staggerLines=_forceValidLowerLimit(axisConfig.staggerLines,1);axisConfig.trendlineValuesOnOpp=(0,_lib.pluck)(axisAttr.trendlineValuesOnOpp,axisAttr.trendlineValuesOnOpp,0);axisConfig.labelDisplay=(0,_lib.pluck)(axisAttr.labelDisplay,"auto").toLowerCase();axisConfig.labelStep=(0,_lib.pluckNumber)(axisAttr.labelStep,0);axisConfig.labelStep=Math.round(axisConfig.labelStep);axisConfig.labelStep=_forceValidLowerLimit(axisConfig.labelStep,0);axisConfig.startPad=0;axisConfig.endPad=0;axisConfig._oriLabelStep=axisConfig.labelStep;axisConfig.showLimits=(0,_lib.pluckNumber)(axisAttr.showLimits,axisConfig.showAxisValues);axisConfig.showUpperLimit=axisAttr.showLimits;axisConfig.showDivLineValues=(0,_lib.pluckNumber)(axisAttr.showDivLineValues,axisConfig.showAxisValues);axisConfig.showCanvasBorder=chart.getChildren("canvas")[0].config.showCanvasBorder?1:0;axisConfig.axisBreak=axisAttr.axisBreaks;axisConfig.isBreak=!!axisConfig.axisBreak;if(axisConfig.isBreak){axis._processAxisBreak()}fontBdrColor=(0,_lib.getFirstValue)(axisAttr.axisNameBorderColor,_lib.BLANKSTRING);fontBdrColor=fontBdrColor?(0,_lib.convertColor)(fontBdrColor,(0,_lib.pluckNumber)(axisAttr.axisNameBorderAlpha,axisAttr.axisNameAlpha,100)):_lib.BLANKSTRING;axisConfig.name=axisConfig.name||{};axisConfig.name.style={fontFamily:(0,_lib.pluck)(axisAttr.axisNameFont,axisAttr.outCanfontFamily),fontSize:(0,_lib.pluck)(axisAttr.axisNameFontSize,pInt(axisAttr.outCanfontSize))+PXSTRING,fontSizeWithUnit:(0,_lib.pluckFontSizeMaintainUnit)(axisAttr.axisNameFontSizeWithUnit,axisAttr.outCanfontSizeWithUnit),color:(0,_lib.convertColor)((0,_lib.pluck)(axisAttr.axisNameFontColor,axisAttr.outCancolor),(0,_lib.pluckNumber)(axisAttr.axisNameFontAlpha,axisAttr.axisNameAlpha,100)),fontWeight:(0,_lib.pluckNumber)(axisAttr.axisNameFontBold,1)?"bold":NORMALSTRING,fontStyle:(0,_lib.pluckNumber)(axisAttr.axisNameFontItalic)?"italic":NORMALSTRING,border:fontBdrColor||axisAttr.axisNameBgColor?(0,_lib.pluckNumber)(axisAttr.axisNameBorderThickness,1)+"px solid":UNDEF,borderColor:fontBdrColor,borderThickness:(0,_lib.pluckNumber)(axisAttr.axisNameBorderThickness,1),borderPadding:(0,_lib.pluckNumber)(axisAttr.axisNameBorderPadding,2),borderRadius:(0,_lib.pluckNumber)(axisAttr.axisNameBorderRadius,0),backgroundColor:axisAttr.axisNameBgColor?(0,_lib.convertColor)(axisAttr.axisNameBgColor,(0,_lib.pluckNumber)(axisAttr.axisNameBgAlpha,axisAttr.axisNameAlpha,100)):_lib.BLANKSTRING,borderDash:(0,_lib.pluckNumber)(axisAttr.axisNameBorderDashed,0)?(0,_lib.getDashStyle)((0,_lib.pluckNumber)(axisAttr.axisNameBorderDashLen,4),(0,_lib.pluckNumber)(axisAttr.axisNameBorderDashGap,2)):DASH_DEF};axisConfig.name.style.lineHeight=(0,_lib.setLineHeight)(axisConfig.name.style);trendFontBdrColor=(0,_lib.getFirstValue)(FCChartObj.trendvaluebordercolor,_lib.BLANKSTRING);trendFontBdrColor=trendFontBdrColor?(0,_lib.convertColor)(trendFontBdrColor,(0,_lib.pluckNumber)(FCChartObj.trendvalueborderalpha,FCChartObj.trendvaluealpha,100)):_lib.BLANKSTRING;axisConfig.trend=axisConfig.trend||{};axisConfig.trend.trendStyle={fontFamily:(0,_lib.pluck)(FCChartObj.trendvaluefont,axisAttr.outCanfontFamily),color:(0,_lib.pluck)(FCChartObj.trendvaluefontcolor,axisAttr.trendlineColor,axisAttr.outCancolor,"333333"),fontSize:(0,_lib.pluckFontSize)(this.computeFontSize(FCChartObj.trendvaluefontsize),pInt(axisAttr.outCanfontSize))+PXSTRING,fontSizeWithUnit:(0,_lib.pluckFontSizeMaintainUnit)(FCChartObj.trendvaluefontsize,axisAttr.outCanfontSizeWithUnit),fontWeight:(0,_lib.pluckNumber)(FCChartObj.trendvaluefontbold)?"bold":NORMALSTRING,fontStyle:(0,_lib.pluckNumber)(FCChartObj.trendvaluefontitalic)?"italic":NORMALSTRING,border:trendFontBdrColor||FCChartObj.trendvaluebgcolor?(0,_lib.pluckNumber)(FCChartObj.trendvalueborderthickness,1)+"px solid":"",borderColor:trendFontBdrColor,borderThickness:(0,_lib.pluckNumber)(FCChartObj.trendvalueborderthickness,1),borderPadding:(0,_lib.pluckNumber)(FCChartObj.trendvalueborderpadding,2),borderRadius:(0,_lib.pluckNumber)(FCChartObj.trendvalueborderradius,0),backgroundColor:FCChartObj.trendvaluebgcolor?(0,_lib.convertColor)(FCChartObj.trendvaluebgcolor,(0,_lib.pluckNumber)(FCChartObj.trendvaluebgalpha,FCChartObj.trendvaluealpha,100)):_lib.BLANKSTRING,borderDash:(0,_lib.pluckNumber)(FCChartObj.trendvalueborderdashed,0)?(0,_lib.getDashStyle)((0,_lib.pluckNumber)(FCChartObj.trendvalueborderdashlen,4),(0,_lib.pluckNumber)(FCChartObj.trendvalueborderdashgap,2)):DASH_DEF};axisConfig.trend.trendStyle.lineHeight=(0,_lib.setLineHeight)(axisConfig.trend.trendStyle);axisConfig.labels=axisConfig.labels||{};axisConfig.lines=axisConfig.lines||{};axisConfig.band=axisConfig.band||{};labelFontBdrColor=(0,_lib.getFirstValue)(FCChartObj.labelbordercolor,_lib.BLANKSTRING);labelFontBdrColor=labelFontBdrColor?(0,_lib.convertColor)(labelFontBdrColor,(0,_lib.pluckNumber)(FCChartObj.labelborderalpha,FCChartObj.labelalpha,100)):_lib.BLANKSTRING;axisConfig.labels.style={fontFamily:(0,_lib.pluck)(axisAttr.labelFont,axisAttr.outCanfontFamily),fontSize:(0,_lib.pluckNumber)(axisAttr.labelFontSize,pInt(axisAttr.outCanfontSize))+PXSTRING,fontSizeWithUnit:(0,_lib.pluckFontSizeMaintainUnit)(axisAttr.labelFontSizeWithUnit,axisAttr.outCanfontSizeWithUnit),fontWeight:(0,_lib.pluckNumber)(axisAttr.labelFontBold)?"bold":NORMALSTRING,fontStyle:(0,_lib.pluckNumber)(axisAttr.labelFontItalic)?"italic":NORMALSTRING,color:(0,_lib.convertColor)((0,_lib.pluck)(axisAttr.labelFontColor,axisAttr.outCancolor),(0,_lib.pluckNumber)(axisAttr.labelFontAlpha,100)),labelLink:FCChartObj.labellink,border:labelFontBdrColor||FCChartObj.labelbgcolor?(0,_lib.pluckNumber)(FCChartObj.labelborderthickness,1)+"px solid":"",borderColor:labelFontBdrColor,borderThickness:(0,_lib.pluckNumber)(FCChartObj.labelborderthickness,1),borderPadding:(0,_lib.pluckNumber)(FCChartObj.labelborderpadding,2),borderRadius:(0,_lib.pluckNumber)(FCChartObj.labelborderradius,0),backgroundColor:FCChartObj.labelbgcolor?(0,_lib.convertColor)(FCChartObj.labelbgcolor,(0,_lib.pluckNumber)(FCChartObj.labelbgalpha,FCChartObj.labelalpha,100)):_lib.BLANKSTRING,borderDash:(0,_lib.pluckNumber)(FCChartObj.labelborderdashed,0)?(0,_lib.getDashStyle)((0,_lib.pluckNumber)(FCChartObj.labelborderdashlen,4),(0,_lib.pluckNumber)(FCChartObj.labelborderdashgap,2)):DASH_DEF};axisConfig.labels.style.lineHeight=(0,_lib.setLineHeight)(axisConfig.labels.style);axisConfig.numberFormatterFn=(0,_lib.pluck)(axisAttr.numberFormatterFn);axisConfig.apparentScrollPos=axisAttr.apparentScrollPos||axisConfig.apparentScrollPos;axisConfig.axisEndLabelDisplaySpace={left:0,right:0,top:0,bottom:0};axisConfig.isConfigured=true;axisConfig._defaultForceDecimal=UNDEF;axisConfig._defaultDecimalPrecision=UNDEF;axis.setScrollType("smart");axis.addToEnv("savedAxis",tempAxis&&(0,_lib.extend2)({},tempAxis))};_proto.setScrollType=function setScrollType(type){var visibleConfig=this.getVisibleConfig();if(type==="none"||type==="smart"||type==="always"){this.config.scrollType=type}this.setVisibleConfig(visibleConfig.minValue,visibleConfig.maxValue)};_proto.getScrollType=function getScrollType(){return this.config.scrollType};_proto._processAxisBreak=function _processAxisBreak(){var axis=this,axisConfig=axis.config,breakPoints,count,i,len;axisConfig.breakPoints=[];breakPoints=axisConfig.axisBreak.split("|");for(i=0,len=breakPoints.length,count=0;i<len;i+=1){breakPoints[i]=breakPoints[i].split(",");if(!isNaN(breakPoints[i][0])&&!isNaN(breakPoints[i][1])){axisConfig.breakPoints[count]={start:(0,_lib.pluckNumber)(breakPoints[i][0]),end:(0,_lib.pluckNumber)(breakPoints[i][1]),length:(0,_lib.pluckNumber)(breakPoints[i][2],0)};count+=1}}axisConfig.breakPoints.sort((function compareAxisBreakPoints(a,b){return a.start-b.start}));axisConfig.hasBreakPoints=true;axis._validateBreakPoints()};_proto._validateBreakPoints=function _validateBreakPoints(){var axisConfig=this.config,breakPoints=axisConfig.breakPoints,totalBreakAmount=0,i,len=breakPoints.length;for(i=0;i<len;i+=1){totalBreakAmount+=breakPoints[i].end-breakPoints[i].start}axisConfig.totalBreakAmount=totalBreakAmount};_proto._getRelativeBreakValue=function _getRelativeBreakValue(value){var breakPoints=this.config.breakPoints,i,len=breakPoints.length,valueDeletion=0;for(i=0;i<len;i+=1){if(value>=breakPoints[i].start&&value<=breakPoints[i].end){return breakPoints[i].start-valueDeletion}else if(value<breakPoints[i].start){break}valueDeletion+=breakPoints[i].end-breakPoints[i].start}return value-valueDeletion};_proto._getRealBreakValue=function _getRealBreakValue(_value){var value=_value,breakPoints=this.config.breakPoints,i,len=breakPoints.length;for(i=0;i<len;i+=1){if(value>=breakPoints[i].start){value+=breakPoints[i].end-breakPoints[i].start}else if(value<breakPoints[i].start){return value}}return value};_proto._adjustNumberFormatter=function _adjustNumberFormatter(interval){var axis=this,axisConfig=axis.config,numberFormatter=axis.getFromEnv("chart").getFromEnv("number-formatter"),defaultDecimalPrecision=axisConfig._defaultDecimalPrecision,defaultForceDecimal=axisConfig._defaultForceDecimal,dec,beforeZero=0,numberFormatterSetting;if(axisConfig.isVertical||axisConfig.numberFormatterFn==="yAxis"){numberFormatterSetting=(numberFormatter.Y[axisConfig.axisIndex]||numberFormatter.Y[0]).yAxisLabelConf}else{numberFormatterSetting=numberFormatter.paramX}defaultDecimalPrecision!==UNDEF?numberFormatterSetting.decimalprecision=defaultDecimalPrecision:axisConfig._defaultDecimalPrecision=numberFormatterSetting.decimalprecision;defaultForceDecimal!==UNDEF?numberFormatterSetting.forcedecimals=defaultForceDecimal:axisConfig._defaultForceDecimal=numberFormatterSetting.forcedecimals;if(parseInt(interval,10)>0){return}dec=interval.toString().split(".")[1];if(dec){beforeZero=dec.match(/^[0]*/)[0].length;if(beforeZero+1>numberFormatterSetting.decimalprecision){numberFormatterSetting.forcedecimals=1}numberFormatterSetting.decimalprecision=Math.max(beforeZero+1,numberFormatterSetting.decimalprecision)}};_proto._isZoomed=function _isZoomed(){var viewPortConfig=this.getFromEnv("chart").config.viewPortConfig;if(this.config.isVertical){return viewPortConfig.scaleY!==1}return viewPortConfig.scaleX!==1};_proto._getIntervalArr=function _getIntervalArr(args){var axis=this,axisConfig=axis.config,axisLabelConfig=axisConfig.labels,increment=axisConfig.axisRange.tickInterval*(args&&args.step||1),returnArr=[],getLimit,visibleMin,visibleMax,min,max,i,value;getLimit=this.getVisibleConfig();if(axis.getFromEnv("chart").config.axisType==="polar"){visibleMin=getLimit.minValue;visibleMax=getLimit.maxValue}else{visibleMin=getLimit.minValue-(args&&args.minPad||0);visibleMax=getLimit.maxValue+(args&&args.maxPad||0)}min=roundToMultiple(visibleMin,increment);max=roundToMultiple(visibleMax-visibleMax%increment,increment);if(min===max){return[min]}if(axisLabelConfig.drawNormalVal){for(i=(0,_lib.toPrecision)(min+increment,10);i<max;i=(0,_lib.toPrecision)(i+increment,10)){if(axisConfig.hasBreakPoints){value=(0,_lib.toPrecision)(axis._getRealBreakValue(i),10)}else{value=(0,_lib.toPrecision)(i,10)}returnArr.push(value)}}if(axisLabelConfig.drawLimitVal){returnArr.push(max,min)}returnArr.indexOf(0)!==-1&&returnArr.splice(returnArr.indexOf(0),1);if(axisConfig.showZeroPlane&&min<=0&&max>=0){returnArr.push(0)}return returnArr.sort((function(a,b){return a-b}))};_proto._disposeScrollBar=function _disposeScrollBar(){var axis=this,axisConfig=axis.config;if(axisConfig.scrollBarDrawn){axis.getLinkedItem("scrollBar").hide();axisConfig.scrollBarDrawn=false}};_proto.addComponentInfo=function addComponentInfo(name,obj){this.getFromEnv("componentInfo")[sanitiseComponentName(name)].push(obj)};_proto.getComponentInfo=function getComponentInfo(name){return this.getFromEnv("componentInfo")[sanitiseComponentName(name)]};_proto.clearComponentInfo=function clearComponentInfo(){var componentInfo=this.getFromEnv("componentInfo"),key;for(key in componentInfo){if(componentInfo.hasOwnProperty(key)){componentInfo[key]=[]}}};_proto.draw=function draw(){var axis=this,axisConfig=axis.config,canvas=axisConfig.canvas,chart=axis.getFromEnv("chart"),chartConfig=chart.config,isVertical=axisConfig.isVertical,viewPortConfig=chartConfig.viewPortConfig,limitUpdaters=axis.getChildren().limitUpdater,viewPortRatio=axisConfig.viewPortRatio||{},canvasLeft=canvas.canvasLeft||chartConfig.canvasLeft,canvasTop=canvas.canvasTop||chartConfig.canvasTop,canvasWidth=canvas.canvasWidth||chartConfig.canvasWidth,canvasHeight=canvas.canvasHeight||chartConfig.canvasHeight,axisContainer=axisConfig.axisContainer,axisLabelContainerTop=axisConfig.axisLabelContainerTop,axisPlotLineContainer=axisConfig.axisPlotLineContainer,axisPlotLineContainerTop=axisConfig.axisPlotLineContainerTop,vlineLabelContainer=axisConfig.vlineLabelContainer,axisBandContainer=axisConfig.axisBandContainer,axisNameContainer=axisConfig.axisNameContainer,axisTrendContainerTop=axisConfig.axisTrendContainerTop,axisTrendContainerBottom=axisConfig.axisTrendContainerBottom,axisTrendLabelContainer=axisConfig.axisTrendLabelContainer,axisAxisLineContainer=axisConfig.axisAxisLineContainer,axisAxisLineContainerBottom=axisConfig.axisAxisLineContainerBottom,plotLineWidth=axisConfig.divLineThickness||0,childContainers=chart.getChildContainer(),axisBottom=childContainers.axisBottomGroup,axisTop=childContainers.axisTopGroup,animElems=[],axisBandGroup,axisPlotLineGroup,axisPlotLineGroupTop,axisLineGroup,axisNameGroup,axisLabelGroup,axisLabelGroupTop,axisTrendGroupTop,axisTrendGroupBottom,dx,dy,originY,originX,plotLineClipRect;axis.clearComponentInfo();originY=viewPortConfig.y*viewPortConfig.scaleY;originX=viewPortConfig.x*viewPortConfig.scaleX;if(isVertical){plotLineClipRect=canvasLeft+","+(canvasTop-plotLineWidth)+","+canvasWidth+","+(canvasHeight+plotLineWidth*2)}else{plotLineClipRect=canvasLeft-plotLineWidth+","+canvasTop+","+(canvasWidth+plotLineWidth*2)+","+canvasHeight}axisBandGroup=axis.getContainer("axisBandGroup")||axis.addContainer("axisBandGroup",createGroup("dataset-Band-group",axisBottom,axis));axisPlotLineGroup=axis.getContainer("axisPlotLineGroup")||axis.addContainer("axisPlotLineGroup",createGroup("dataset-Line-group",axisBottom,axis));axisPlotLineGroupTop=axis.getContainer("axisPlotLineGroupTop")||axis.addContainer("axisPlotLineGroupTop",createGroup("dataset-Line-group-top",axisTop,axis));axisNameGroup=axis.getContainer("axisNameGroup")||axis.addContainer("axisNameGroup",createGroup("dataset-Name-group",axisBottom,axis));axisLineGroup=axis.getContainer("axisLineGroup")||axis.addContainer("axisLineGroup",createGroup("axis-Line-group",axisTop,axis));axisTrendGroupTop=axis.getContainer("axisTrendGroupTop")||axis.addContainer("axisTrendGroupTop",createGroup("dataset-Trend-group-top",axisTop,axis));axisLabelGroup=axis.getContainer("axisLabelGroup")||axis.addContainer("axisLabelGroup",createGroup("dataset-Label-group",axisBottom,axis));axisLabelGroupTop=axis.getContainer("axisLabelGroupTop")||axis.addContainer("axisLabelGroupTop",createGroup("dataset-Label-group",axisTop,axis));axisTrendGroupBottom=axis.getContainer("axisTrendGroupBottom")||axis.addContainer("axisTrendGroupBottom",createGroup("dataset-Trend-group-bottom",axisBottom,axis));if(!axisTrendContainerBottom){axisConfig.axisTrendContainerBottom=axisTrendContainerBottom=createGroup("dataset-axis-trend-bottom",axisTrendGroupBottom,axis);axisTrendContainerBottom.attr({"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight})}else{axisTrendContainerBottom.attr({"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight})}if(!axisContainer){axisConfig.axisContainer=axisContainer=createGroup("dataset-axis",axisLabelGroup,axis)}if(!axisLabelContainerTop){axisConfig.axisLabelContainerTop=axisLabelContainerTop=createGroup("dataset-top-label",axisLabelGroupTop,axis)}if(!axisAxisLineContainer){axisConfig.axisAxisLineContainer=axisAxisLineContainer=createGroup("axis-line-tick",axisLineGroup,axis)}if(!vlineLabelContainer){axisConfig.vlineLabelContainer=vlineLabelContainer=createGroup("axis-vline-label",axisLineGroup,axis)}if(!axisBandContainer){axisConfig.axisBandContainer=axisBandContainer=createGroup("dataset-axis-bands",axisBandGroup,axis);axisBandContainer.attr({"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight})}else{animElems.push({el:axisBandContainer,attrs:{"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight},animType:"linear",animConfig:[{syncWith:"initial",start:0,initial:1}]})}if(!axisPlotLineContainer){axisConfig.axisPlotLineContainer=axisPlotLineContainer=createGroup("dataset-axis-lines",axisPlotLineGroup,axis);axisPlotLineContainer.attr({"clip-rect":plotLineClipRect})}else{animElems.push({el:axisPlotLineContainer,attrs:{"clip-rect":plotLineClipRect},animType:"linear",animConfig:[{syncWith:"initial",start:0,initial:1}]})}if(!axisPlotLineContainerTop){axisConfig.axisPlotLineContainerTop=axisPlotLineContainerTop=createGroup("dataset-axis-lines-top",axisPlotLineGroupTop,axis);axisPlotLineContainerTop.attr({"clip-rect":plotLineClipRect})}else{animElems.push({el:axisPlotLineContainerTop,attrs:{"clip-rect":plotLineClipRect},animType:"linear",animConfig:[{syncWith:"initial",start:0,initial:1}]})}if(!axisTrendContainerTop){axisConfig.axisTrendContainerTop=axisTrendContainerTop=createGroup("dataset-axis-trend-top",axisTrendGroupTop,axis);axisTrendContainerTop.attr({"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight})}else{animElems.push({el:axisTrendContainerTop,attrs:{"clip-rect":canvasLeft+","+canvasTop+","+canvasWidth+","+canvasHeight},animType:"linear",animConfig:[{syncWith:"initial",start:0,initial:1}]})}if(!axisTrendLabelContainer){axisConfig.axisTrendLabelContainer=axisTrendLabelContainer=createGroup("dataset-axis-trend-label",axisTrendGroupTop,axis)}if(!axisNameContainer){axisConfig.axisNameContainer=axisNameContainer=createGroup("dataset-axis-name",axisNameGroup,axis)}if(!axisAxisLineContainerBottom){axisConfig.axisAxisLineContainerBottom=axisAxisLineContainerBottom=createGroup("axis-line-tick-bottom",axisBottom,axis)}if(viewPortRatio.scaleX&&viewPortRatio.scaleY&&(viewPortRatio.scaleX!==viewPortConfig.scaleX||viewPortRatio.scaleY!==viewPortConfig.scaleY)){viewPortRatio.scaleX=viewPortConfig.scaleX;viewPortRatio.scaleY=viewPortConfig.scaleY;axis._drawComponents()}else{if(isVertical){dy=originY-viewPortConfig.y*viewPortConfig.scaleY;vlineLabelContainer.transform("t0,"+dy);axisContainer.transform("t0,"+dy);axisLabelContainerTop.transform("t0,"+dy);axisPlotLineContainer.transform("t0,"+dy);axisPlotLineContainerTop.transform("t0,"+dy);axisBandContainer.transform("t0,"+dy);axisTrendContainerTop.transform("t0,"+dy);axisTrendContainerBottom.transform("t0,"+dy)}else{dx=originX-viewPortConfig.x*viewPortConfig.scaleX;vlineLabelContainer.transform("t"+dx+",0");axisContainer.transform("t"+dx+",0");axisLabelContainerTop.transform("t"+dx+",0");axisPlotLineContainer.transform("t"+dx+",0");axisPlotLineContainerTop.transform("t"+dx+",0");axisBandContainer.transform("t"+dx+",0");axisTrendContainerTop.transform("t"+dx+",0");axisTrendContainerBottom.transform("t"+dx+",0")}axis._drawComponents()}axis.addExtEventListener("animationcomplete",(function(){limitUpdaters&&limitUpdaters.forEach(_drawLimitUpdater)}),axis.getFromEnv("animationmanager"));axis.addToEnv("tempAxis",{canvasHeight:axis.config.canvas.canvasHeight,canvasWidth:axis.config.canvas.canvasWidth,canvasLeft:axis.config.canvas.canvasLeft,canvasRight:axis.config.canvas.canvasRight,canvasBottom:axis.config.canvas.canvasBottom,canvasTop:axis.config.canvas.canvasTop,visibleRange:axis.getVisibleConfig(),visibleLength:axis.getVisibleLength(),axisLength:axis.config.axisDimention.axisLength,axisOpposite:axis.config.axisDimention.opposite,axisY:axis.config.axisDimention.y,axisX:axis.config.axisDimention.x,axisRangeMin:axis.config.axisRange.min,axisRangeMax:axis.config.axisRange.max,axisTickInterval:axis.config.axisRange.tickInterval,axisIsReverse:axis.config.isReverse,axisIsVertical:axis.config.isVertical,axisHasBreakPoints:axis.config.hasBreakPoints,viewPortScaleY:axis.getFromEnv("chart").config.viewPortConfig.scaleY,viewPortY:axis.getFromEnv("chart").config.viewPortConfig.y,viewPortScaleX:axis.getFromEnv("chart").config.viewPortConfig.scaleX,viewPortX:axis.getFromEnv("chart").config.viewPortConfig.x,chartHeight:axis.getFromEnv("chart").config.canvasHeight,chartWidth:axis.getFromEnv("chart").config.canvasWidth,chartLeft:axis.getFromEnv("chart").config.canvasLeft,chartRight:axis.getFromEnv("chart").config.canvasRight,chartBottom:axis.getFromEnv("chart").config.canvasBottom,chartTop:axis.getFromEnv("chart").config.canvasTop,pvr:axis.config.pvr,refVal:axis.config.refVal,refVisibleVal:axis.config.refVisibleVal})};_proto.getBreakPoints=function getBreakPoints(){var axisConfig=this.config;if(axisConfig.hasBreakPoints){return axisConfig.breakPoints}return false};_proto.getValue=function getValue(pixel,options){var axis=this,axisConfig=axis.config,wrtVisible=options&&options.wrtVisible,refVal=wrtVisible?axisConfig.refVisibleVal:axisConfig.refVal;return refVal+(pixel-axisConfig.refPx)/axis.config.pvr};_proto.getVisibleLength=function getVisibleLength(){var limit=this.getVisibleConfig();return Math.abs(limit.maxValue-limit.minValue)};_proto.setAxisPadding=function setAxisPadding(_startPad,_endPad){if(_startPad===void 0){_startPad=0}if(_endPad===void 0){_endPad=0}var axis=this,axisConfig=axis.config,startPad=_startPad,endPad=_endPad;startPad=axisConfig.startPad=Math.max(axisConfig.startPad,startPad);endPad=axisConfig.endPad=Math.max(axisConfig.endPad,endPad);if(axisConfig.oriCatLen===0){if(startPad===0){startPad=.5}if(endPad===0){endPad=.5}}if(axisConfig.hasCategory){if(axisConfig.oriCatLen>=0){axis.setAxisRange({max:axisConfig.oriCatLen+endPad,min:-startPad})}}else{if(axisConfig.originalMax&&axisConfig.originalMin){axis.setDataLimit(axisConfig.originalMax,axisConfig.originalMin)}}};_proto.setAxisConfig=function setAxisConfig(data){var axisConfig=this.config,prop;for(prop in data){if(data.hasOwnProperty(prop)){axisConfig[prop]=data[prop]}}};_proto.getAxisConfig=function getAxisConfig(name){var axisConfig=this.config;if(name){return axisConfig[name]}return axisConfig};_proto.setAxisRange=function setAxisRange(data){var axis=this,axisConfig=axis.config,axisRange=axisConfig.axisRange,tempAxis,tempAxisRange,prop;for(prop in data){if(data.hasOwnProperty(prop)){axisRange[prop]=data[prop]}}if(axisConfig.isReverse){axisConfig.refVal=axisRange.max}else{axisConfig.refVal=axisRange.min}axis.setVisibleConfig(axisRange.min,axisRange.max);if(axis.getFromEnv("tempAxis")){tempAxis=axis.getFromEnv("tempAxis");tempAxisRange={max:tempAxis.axisRangeMax,min:tempAxis.axisRangeMin,tickInterval:tempAxis.axisTickInterval};if(tempAxisRange.max!==axisRange.max||tempAxisRange.min!==axisRange.min||tempAxisRange.tickInterval!==axisRange.tickInterval){axisConfig.rangeChanged=true}else{axisConfig.rangeChanged=false}}};_proto.setAxisDimention=function setAxisDimention(data){var axis=this,axisConfig=axis.config,chartConfig=axis.getFromEnv("chart").config,axisDimention=axisConfig.axisDimention||(axisConfig.axisDimention={}),tempAxis;axisDimention.opposite=(0,_lib.pluckNumber)(data.opposite,axisDimention.opposite);axisDimention.x=(0,_lib.pluckNumber)(data.x,chartConfig.canvasLeft,axisDimention.x);axisDimention.y=(0,_lib.pluckNumber)(data.y,chartConfig.canvasTop,axisDimention.y);axisDimention.axisLength=(0,_lib.pluckNumber)(data.axisLength,axisDimention.axisLength);if(axisConfig.isVertical){axisConfig.refPx=axisDimention.y}else{axisConfig.refPx=axisDimention.x}axis.getPVR();if(axis.getFromEnv("tempAxis")){tempAxis=axis.getFromEnv("tempAxis");if(tempAxis.axisLength!==axisDimention.axisLength||tempAxis.axisOpposite!==axisDimention.opposite||tempAxis.axisY!==axisDimention.y||tempAxis.axisX!==axisDimention.x){axisConfig.dimensionChanged=true}else{axisConfig.dimensionChanged=false}}};_proto.setDataLimit=function setDataLimit(_max,_min){var axis=this,axisConfig=axis.config,max=_max,min=_min,axisRange=axisConfig.axisRange,AxisMaxValue=axisConfig.isPercent?100:axisConfig.axisMaxValue,AxisMinValue=axisConfig.isPercent?0:axisConfig.axisMinValue,numDivLines=axisConfig.numDivLines,setAdaptiveMin=axisConfig.setAdaptiveMin,adjustDiv=axisConfig.adjustDiv,startPad=axisConfig.startPad||0,endPad=axisConfig.endPad||0,setMinAsZero,stopMaxAtZero,axisLimits,lines=axisConfig.trendLines||axisConfig.vTrendLines,lineArr=lines&&lines[0]&&lines[0].line,lineMin,lineMax;lineMin=(0,_safeMin.default)(lineArr,(function _getMin(obj){return obj.startvalue}));lineMax=(0,_safeMax.default)(lineArr,(function _getMax(obj){return obj.endvalue}));min=(0,_safeMin.default)([lineMin,min]);max=(0,_safeMax.default)([lineMax,max]);axisConfig.originalMax=max;axisConfig.originalMin=min;max=axisConfig.isPercent?100:max+endPad;min=axisConfig.isPercent?0:min-startPad;setMinAsZero=stopMaxAtZero=!setAdaptiveMin;if(axisConfig.hasBreakPoints){max-=axisConfig.totalBreakAmount}axisLimits=(0,_lib.getAxisLimits)((0,_lib.pluckNumber)(max,AxisMaxValue),(0,_lib.pluckNumber)(min,AxisMinValue),AxisMaxValue,AxisMinValue,stopMaxAtZero,setMinAsZero,numDivLines,adjustDiv);axis.setAxisRange({max:Number((0,_lib.toPrecision)(axisLimits.Max,10)),min:Number((0,_lib.toPrecision)(axisLimits.Min,10)),tickInterval:Number((0,_lib.toPrecision)(axisLimits.divGap,10))});axis._adjustNumberFormatter(axisRange.tickInterval);if(axisRange.tickInterval===0){axisRange.tickInterval=1}};_proto.setVisibleConfig=function setVisibleConfig(minValue,maxValue){var axis=this,axisConfig=axis.config,range=axisConfig.axisRange,scrollType=axis.getScrollType(),axisScroll,translationStr,zoom,maxZoomLimit=axisConfig.maxZoomLimit;if(minValue>maxValue){return false}zoom=(range.max-range.min)/(maxValue-minValue);if(maxZoomLimit&&zoom>maxZoomLimit){return false}axisConfig.minVisibleValue=minValue;axisConfig.maxVisibleValue=maxValue;if(axisConfig.isReverse){axisConfig.refVisibleVal=maxValue}else{axisConfig.refVisibleVal=minValue}if(scrollType==="always"){axis.setScrollEnabled(true)}else if(scrollType==="smart"){if(axis._isZoomed()){axis.setScrollEnabled(true)}else{axis.setScrollEnabled(false)}}else if(scrollType==="none"&&axis.isScrollEnabled()){axis.setScrollEnabled(false)}axis.getPVR();axis.fireEvent("visiblerangeset",{minValue:axisConfig.minVisibleValue,maxValue:axisConfig.maxVisibleValue});if(axis.getFromEnv("tempAxis")){axis.asyncDraw();axisScroll=-axis.getTranslation();if(axisConfig.isVertical){translationStr=["T",0,",",axisScroll].join("")}else{translationStr=["T",axisScroll,",",0].join("")}axisConfig.axisContainer.attr({transform:translationStr});axisConfig.axisBandContainer.attr({transform:translationStr});axisConfig.axisPlotLineContainer.attr({transform:translationStr});axisConfig.axisTrendContainerTop.attr({transform:translationStr})}return true};_proto.getVisibleConfig=function getVisibleConfig(){var axisConfig=this.config;return{minValue:axisConfig.minVisibleValue,maxValue:axisConfig.maxVisibleValue}};_proto.getPVR=function getPVR(){var axis=this,axisConfig=axis.config,visibleConfig=axis.getVisibleConfig(),visibleSpan=visibleConfig.maxValue-visibleConfig.minValue,axisLength=(axisConfig.axisDimention||{}).axisLength,pvr=axisLength/visibleSpan;if(pvr){if(axisConfig.isReverse){axisConfig.pvr=-pvr}else{axisConfig.pvr=pvr}}return axisConfig.pvr};_proto.getPixel=function getPixel(_value,options){var axis=this,axisConfig=axis.config,value=_value,wrtVisible=options&&options.wrtVisible,refVal=wrtVisible?axisConfig.refVisibleVal:axisConfig.refVal,tempAxis=axis.getFromEnv("tempAxis"),pvr=axisConfig.pvr*axis.getFromEnv("chartConfig").viewPortConfig.scaleX;if(options&&options.preValue&&tempAxis){refVal=wrtVisible?tempAxis.refVisibleVal:tempAxis.refVal;pvr=axis.getOldPVR()}if(!pvr){return 0}if(axisConfig.hasBreakPoints){value=axis._getRelativeBreakValue(value)}return(0,_lib.toPrecision)(axisConfig.refPx+(value-refVal)*pvr,2)};_proto.getLimit=function getLimit(){var axisRange=this.config.axisRange;return{min:axisRange.min,max:axisRange.max,tickInterval:axisRange.tickInterval}};_proto.getOldPVR=function getOldPVR(){var tempAxis=this.getFromEnv("tempAxis");return tempAxis?tempAxis.pvr:this.config.pvr};_proto.hide=function hide(){var axisConfig=this.config;if(!axisConfig.axisContainer){return}axisConfig.axisLabelContainerTop.hide();axisConfig.axisContainer.hide();axisConfig.axisPlotLineContainer.hide();axisConfig.axisPlotLineContainerTop.hide();axisConfig.axisBandContainer.hide();axisConfig.axisNameContainer.hide();axisConfig.axisTrendContainerTop.hide();axisConfig.axisTrendContainerBottom.hide();axisConfig.axisTrendLabelContainer.hide();axisConfig.axisAxisLineContainer.hide();axisConfig.axisAxisLineContainerBottom.hide()};_proto.show=function show(){var axisConfig=this.config;if(!axisConfig.axisContainer){return}axisConfig.axisLabelContainerTop.show();axisConfig.axisContainer.show();axisConfig.axisPlotLineContainer.show();axisConfig.axisPlotLineContainerTop.show();axisConfig.axisBandContainer.show();axisConfig.axisNameContainer.show();axisConfig.axisTrendContainerTop.show();axisConfig.axisTrendContainerBottom.show();axisConfig.axisTrendLabelContainer.show();axisConfig.axisAxisLineContainer.show();axisConfig.axisAxisLineContainerBottom.show()};_proto.getTranslation=function getTranslation(){var axis=this,axisConfig=axis.config;return axis.getPixel(axisConfig.refVisibleVal)-axisConfig.refPx};_proto.setScrollEnabled=function setScrollEnabled(bool){var axis=this;axis.config.scrollEnabled=bool;if(bool){axis.getFromEnv("chart")._createToolBoxGantt();axis.getFromEnv("tempAxis")&&axis.asyncDraw()}else{axis._disposeScrollBar()}};_proto.isScrollEnabled=function isScrollEnabled(){return this.config.scrollEnabled};_proto.manageProcessScroll=function manageProcessScroll(scroll){var axis=this,axisConfig=axis.config,spaceTaken=axisConfig.totalWidth||0,totalVisiblelWidth=axisConfig.totalVisiblelWidth,translateX;if(spaceTaken>totalVisiblelWidth){translateX=(spaceTaken-totalVisiblelWidth)*(1-scroll);axis.translateAxis(translateX,UNDEF)}};_proto.translateAxis=function translateAxis(x,y){var axis=this,axisConfig=axis.config,ganttPlotLineContainer=axis.getContainer("ganttPlotLineContainer"),ganttPlotHoverBandContainer=axis.getContainer("ganttPlotHoverBandContainer"),lastTranslate=axisConfig.lastTranslate||(axisConfig.lastTranslate={x:0,y:0}),ganttLabelContainer=axis.getContainer("labelContainer"),ganttHeaderContainer=axis.getContainer("headerContainer"),hotContainer=axis.getContainer("hotContainer"),dx,dy;dx=x!==UNDEF?x-lastTranslate.x:0;dy=y!==UNDEF?y-lastTranslate.y:0;lastTranslate.x=x!==UNDEF?x:lastTranslate.x;lastTranslate.y=y!==UNDEF?y:lastTranslate.y;ganttLabelContainer&&ganttLabelContainer.translate(dx,dy);ganttHeaderContainer&&ganttHeaderContainer.translate(dx,dy);axisConfig.labelContainer&&axisConfig.labelContainer.translate(dx,dy);hotContainer&&hotContainer.translate(dx,dy);axisConfig.headerContainer&&axisConfig.headerContainer.translate(dx,0);if(axisConfig.isVertical){ganttPlotLineContainer&&ganttPlotLineContainer.translate(0,dy);ganttPlotHoverBandContainer&&ganttPlotHoverBandContainer.translate(0,dy)}else{ganttPlotLineContainer&&ganttPlotLineContainer.translate(dx,0);ganttPlotHoverBandContainer&&ganttPlotHoverBandContainer.translate(dx,0);axis.setAxisConfig({animateAxis:false});axisConfig.drawTrendLines&&axis._drawTrendLine();axis.setAxisConfig({animateAxis:true})}};_proto.resetTransletAxis=function resetTransletAxis(){var axis=this,axisConfig=axis.config,ganttLabelContainer=axis.getContainer("labelContainer"),ganttHeaderContainer=axis.getContainer("headerContainer"),hotContainer=axis.getContainer("hotContainer"),transformAttr;transformAttr={transform:"t0,0"};axisConfig.lastTranslate={x:0,y:0};ganttLabelContainer&&ganttLabelContainer.attr(transformAttr);ganttHeaderContainer&&ganttHeaderContainer.attr(transformAttr);axisConfig.labelContainer&&axisConfig.labelContainer.attr(transformAttr);axisConfig.headerContainer&&axisConfig.headerContainer.attr(transformAttr);axisConfig.ganttPlotLineContainer&&axisConfig.ganttPlotLineContainer.attr(transformAttr);axisConfig.ganttPlotHoverBandContainer&&axisConfig.ganttPlotHoverBandContainer.attr(transformAttr);hotContainer&&hotContainer.attr(transformAttr)};return CartesianAxis}(_componentInterface.ComponentInterface);var _default=CartesianAxis;exports.default=_default;