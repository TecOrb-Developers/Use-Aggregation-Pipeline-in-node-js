"use strict";exports.__esModule=true;exports.default=void 0;var t0=new Date,t1=new Date,ie8Satisfier=0;var isNil=function isNil(d){return typeof d==="undefined"||d===null};var TimeInterval=function(){function TimeInterval(IntervalObj){this._name=IntervalObj.name;this._floori=IntervalObj.floor;this._offseti=IntervalObj.offset;this._count=IntervalObj.count;this._field=IntervalObj.field}var _proto=TimeInterval.prototype;_proto.name=function name(){return this._name};_proto.floor=function floor(date){var newDate=new Date(Number(date));newDate=this._floori(newDate,this._clipDates,this._timeUniverse);return newDate};_proto.setClipDates=function setClipDates(clipDates){this._clipDates=clipDates};_proto.setTimeUniverse=function setTimeUniverse(timeUniverse){this._timeUniverse=timeUniverse};_proto.ceil=function ceil(date){var datei=new Date(date-1);datei=this._floori(datei,this._clipDates,this._timeUniverse);datei=this._offseti(datei,1,this._clipDates,this._timeUniverse);datei=this._floori(datei,this._clipDates,this._timeUniverse);return datei};_proto.round=function round(date){var d0=this.floor(date),d1=this.ceil(date);return date-d0<d1-date?d0:d1};_proto.offset=function offset(date,step){var datei=new Date(Number(date));datei=this._offseti(datei,isNil(step)?1:Math.floor(step),this._clipDates,this._timeUniverse);return datei};_proto.range=function range(start,stop,step){var range=[],starti=this.ceil(start),stepi=isNil(step)?1:Math.floor(step),previous;if(!(starti<stop)||!(stepi>0))return range;do{previous=new Date(Number(starti));range.push(previous);starti=this._offseti(starti,stepi,this._clipDates,this._timeUniverse);starti=this._floori(starti,this._clipDates,this._timeUniverse)}while(previous<starti&&starti<stop);return range};_proto.filter=function filter(test){var _this=this;return new TimeInterval({name:this.name(),floor:function floor(_date){var date=_date;if(!Number.isNaN(Number(date))){while(_this._floori(date,_this._clipDates,_this._timeUniverse),!test(date)){date.setTime(date-1)}}return Number(date)},offset:function offset(_date,step){var stepi=step,date=_date;if(!Number.isNaN(Number(date))){if(stepi<0){while(++stepi<=0){ie8Satisfier++;do{date=_this._offseti(date,-1,_this._clipDates,_this._timeUniverse)}while(!test(date))}}else{while(--stepi>=0){do{date=_this._offseti(date,1,_this._clipDates,_this._timeUniverse)}while(!test(date))}}}return Number(date)}})};_proto.count=function count(start,end){var count=0;if(this._count){t0.setTime(Number(start));t1.setTime(Number(end));t0=this._floori(t0,this._clipDates,this._timeUniverse);t1=this._floori(t1,this._clipDates,this._timeUniverse);count=Math.floor(this._count(t0,t1,this._clipDates))}return count};_proto.every=function every(step){var _this2=this;var stepi=Math.floor(step);var everyInterval=null;if(!this._count||!Number.isFinite(stepi)||!(stepi>0)){everyInterval=null}else if(!(stepi>1)){everyInterval=this}else{everyInterval=this.filter(this._field?function(d){return _this2._field(d,_this2._clipDates,_this2._timeUniverse)%stepi===0}:function(d){return _this2.count(0,d)%stepi===0})}return everyInterval};return TimeInterval}();var _default=TimeInterval;exports.default=_default;