"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _timeInterval=_interopRequireDefault(require("./time-interval.js"));var _timeIntervalclip=require("./time-intervalclip");var MillisecondInterval=function(_TimeInterval){(0,_inheritsLoose2.default)(MillisecondInterval,_TimeInterval);function MillisecondInterval(){return _TimeInterval.apply(this,arguments)||this}var _proto=MillisecondInterval.prototype;_proto.every=function every(step){var stepi=Math.floor(step);if(!this.count||!Number.isFinite(stepi)||!(stepi>0)){return null}if(!(stepi>1)){return this}return new _timeInterval.default({name:"millisecond",floor:function floor(d,clippedDates,timeUniverse){return new Date(Number((0,_timeIntervalclip.getFloor)(new Date(Number(d.setTime(Math.floor(d/stepi)*stepi))),clippedDates,timeUniverse)))},offset:function offset(d,s,clippedDates,timeUniverse){var isPositiveOffset=s>0,dateObj={date:new Date(Number(d))},cloneDate=new Date(Number(dateObj.date));return new Date(Number(isPositiveOffset?(0,_timeIntervalclip.clampDownDateWithinClip)(dateObj.date,new Date(Number(cloneDate.setTime(Number(cloneDate)+s*stepi))),clippedDates,timeUniverse):(0,_timeIntervalclip.clampUpDateWithinClip)(dateObj.date,new Date(Number(cloneDate.setTime(Number(cloneDate)+s*stepi))),clippedDates,timeUniverse)))},count:function count(s,e,clippedDates){var clipArray=(0,_timeIntervalclip.getValidDatesWithin)(clippedDates,s,e),clipDuration=0,clipDates=(0,_timeIntervalclip.getClampRangesAround)(clippedDates,e);clipArray=(0,_timeIntervalclip.getClipArray)(clipDates,clipArray);clipArray.forEach((function(date){clipDuration+=Number(date.to)-Number(date.from)}));return e-s-Math.floor(clipDuration/stepi)}})};return MillisecondInterval}(_timeInterval.default);var _default=MillisecondInterval;exports.default=_default;