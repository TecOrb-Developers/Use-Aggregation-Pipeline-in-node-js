"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=exports.tickFormat=exports.tickInterval=void 0;var _bisector=_interopRequireDefault(require("../array/bisector"));var _ticks=require("../array/ticks");var DURATION_YEAR=31536e6,tickInterval=function tickInterval(start,stop,interval,count,tickIntervals,timeIntervals){if(interval===void 0){interval=10}var i=interval,c=count,idx,target,tickNum;if(typeof i==="number"){target=Math.abs(stop-start)/i;tickNum=(0,_bisector.default)((function(n){return n[2]})).right(tickIntervals,target);if(tickNum===tickIntervals.length){c=(0,_ticks.tickStep)(start/DURATION_YEAR,stop/DURATION_YEAR,i);i=timeIntervals.year}else if(tickNum){if(target/tickIntervals[tickNum-1][2]<tickIntervals[tickNum][2]/target){idx=tickNum-1}else{idx=tickNum}tickNum=tickIntervals[idx];c=tickNum[1];i=tickNum[0]}else{c=Math.max((0,_ticks.tickStep)(start,stop,i),1);i=timeIntervals.millisecond}}return c===null||typeof c==="undefined"?i:i.every(c)},timeTicks=function timeTicks(_start,_stop,interval,count,tickIntervals,timeIntervals){var start=_start,stop=_stop,isReverse=stop<start,temp,ticks;if(isReverse){temp=start;start=stop;stop=temp}ticks=tickInterval(start,stop,interval,count,tickIntervals,timeIntervals);ticks=ticks?ticks.range(start,stop+1):[];return isReverse?ticks.reverse():ticks},tickFormat=function tickFormat(intervals,formatters,date){var formatter;if(intervals.second.floor(date)<date){formatter=formatters.millisecond}else if(intervals.minute.floor(date)<date){formatter=formatters.second}else if(intervals.hour.floor(date)<date){formatter=formatters.minute}else if(intervals.day.floor(date)<date){formatter=formatters.hour}else if(intervals.month.floor(date)<date){if(intervals.week.floor(date)<date){formatter=formatters.day}else{formatter=formatters.week}}else if(intervals.year.floor(date)<date){formatter=formatters.month}else{formatter=formatters.year}return formatter.format(date)};exports.tickFormat=tickFormat;exports.tickInterval=tickInterval;var _default=timeTicks;exports.default=_default;