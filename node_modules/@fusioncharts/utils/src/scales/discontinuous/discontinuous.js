"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _identity=_interopRequireDefault(require("../identity"));var _identity2=_interopRequireDefault(require("./discontinuities/identity"));var _tickFilter=_interopRequireDefault(require("./tickFilter"));var ScaleDiscontinuous=function(){function ScaleDiscontinuous(scale){this.scale=scale||new _identity.default;this.discontinuity=new _identity2.default;this.setRange=function(){var _this$scale;(_this$scale=this.scale).setRange.apply(_this$scale,arguments);return this};this.getRange=function(){return this.scale.getRange()};if(this.scale.rangeRound){this.rangeRound=function(){var _this$scale2;(_this$scale2=this.scale).rangeRound.apply(_this$scale2,arguments);return this}}if(this.scale.setInterpolate){this.setInterpolate=function(){var _this$scale3;(_this$scale3=this.scale).setInterpolate.apply(_this$scale3,arguments);return this};this.getInterpolate=function(){return this.scale.getInterpolate()}}if(this.scale.setClamp){this.setClamp=function(){var _this$scale4;(_this$scale4=this.scale).setClamp.apply(_this$scale4,arguments);return this};this.getClamp=function(){this.scale.getClamp()}}}var _proto=ScaleDiscontinuous.prototype;_proto.setDomain=function setDomain(domain){var domainLower=this.discontinuity.clampUp(domain[0]),domainUpper=this.discontinuity.clampDown(domain[1]);this.scale.setDomain([domainLower,domainUpper]);return this};_proto.getDomain=function getDomain(){return this.scale.getDomain()};_proto.setDiscontinuity=function setDiscontinuity(discontinuity){this.discontinuity=discontinuity;return this};_proto.getDiscontinuity=function getDiscontinuity(){return this.discontinuity};_proto.getRangeValue=function getRangeValue(domainValue){var domain=this.scale.getDomain(),range=this.scale.getRange(),domainDistance=this.discontinuity.distance(domain[0],domain[1]),distanceToValue=this.discontinuity.distance(domain[0],domainValue),ratioToValue=distanceToValue/domainDistance;return ratioToValue*(range[1]-range[0])+range[0]};_proto.getDomainValue=function getDomainValue(rangeValue){var domain=this.scale.getDomain(),range=this.scale.getRange(),domainDistance=this.discontinuity.distance(domain[0],domain[1]),ratioToValue=(rangeValue-range[0])/(range[1]-range[0]),distanceToValue=ratioToValue*domainDistance;return this.discontinuity.offset(domain[0],distanceToValue)};_proto.ticks=function ticks(count){var ticks=this.scale.ticks(count);return(0,_tickFilter.default)(ticks,this.discontinuity)};_proto.nice=function nice(count){this.scale.nice(count);var domain=this.scale.getDomain(),domainLower=this.discontinuity.clampUp(domain[0]),domainUpper=this.discontinuity.clampDown(domain[1]);this.scale.setDomain([domainLower,domainUpper]);return this};_proto.copy=function copy(){return new ScaleDiscontinuous(this.scale.copy()).setDiscontinuity(this.discontinuity.copy())};return ScaleDiscontinuous}();var _default=ScaleDiscontinuous;exports.default=_default;