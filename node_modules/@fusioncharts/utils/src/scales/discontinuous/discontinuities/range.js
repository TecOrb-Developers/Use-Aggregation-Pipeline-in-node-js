"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _construct2=_interopRequireDefault(require("@babel/runtime/helpers/construct"));var inRange=function inRange(number,range){return number>range[0]&&number<range[1]},surroundsRange=function surroundsRange(inner,outer){return inner[0]>=outer[0]&&inner[1]<=outer[1]},add=function add(value,offset){return value instanceof Date?new Date(value.getTime()+offset):value+offset};var Range=function(){function Range(){for(var _len=arguments.length,ranges=new Array(_len),_key=0;_key<_len;_key++){ranges[_key]=arguments[_key]}this.ranges=ranges}var _proto=Range.prototype;_proto.distance=function distance(_start,_end){var start=this.clampUp(_start),end=this.clampUp(_end);var surroundedRanges=this.ranges.filter((function(range){return surroundsRange(range,[start,end])})),rangeSizes=surroundedRanges.map((function(range){return range[1]-range[0]}));return end-start-rangeSizes.reduce((function(total,current){return total+current}),0)};_proto.offset=function offset(start,_offset){if(_offset>0){var _currentLocation=this.clampUp(start),_offsetRemaining=_offset,_filterRanges=function _filterRanges(r){return r[0]>_currentLocation};while(_offsetRemaining>0){var futureRanges=this.ranges.filter(_filterRanges).sort((function(a,b){return a[0]-b[0]}));if(futureRanges.length){var nextRange=futureRanges[0],delta=nextRange[0]-_currentLocation;if(delta>_offsetRemaining){_currentLocation=add(_currentLocation,_offsetRemaining);_offsetRemaining=0}else{_currentLocation=nextRange[1];_offsetRemaining-=delta}}else{_currentLocation=add(_currentLocation,_offsetRemaining);_offsetRemaining=0}}return _currentLocation}var currentLocation=this.clampDown(start),offsetRemaining=_offset,filterRanges=function filterRanges(r){return r[1]<currentLocation};while(offsetRemaining<0){var _futureRanges=this.ranges.filter(filterRanges).sort((function(a,b){return b[0]-a[0]}));if(_futureRanges.length){var _nextRange=_futureRanges[0],_delta=_nextRange[1]-currentLocation;if(_delta<offsetRemaining){currentLocation=add(currentLocation,offsetRemaining);offsetRemaining=0}else{currentLocation=_nextRange[0];offsetRemaining-=_delta}}else{currentLocation=add(currentLocation,offsetRemaining);offsetRemaining=0}}return currentLocation};_proto.clampUp=function clampUp(d){return this.ranges.reduce((function(value,range){return inRange(value,range)?range[1]:value}),d)};_proto.clampDown=function clampDown(d){return this.ranges.reduce((function(value,range){return inRange(value,range)?range[0]:value}),d)};_proto.copy=function copy(){return(0,_construct2.default)(Range,this.ranges)};return Range}();var _default=Range;exports.default=_default;