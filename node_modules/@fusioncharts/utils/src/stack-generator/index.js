"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _isArray=_interopRequireDefault(require("../type/is-array"));var _constant=_interopRequireDefault(require("../scale-utils/constant"));var _default2=_interopRequireDefault(require("./orders/default"));var _default3=_interopRequireDefault(require("./offsets/default"));var stackValue=function stackValue(d,key){return d[key]};var StackGenerator=function(){function StackGenerator(){this.keysAccessor=(0,_constant.default)([]);this.order=_default2.default;this.offset=_default3.default;this.valueAccessor=stackValue}var _proto=StackGenerator.prototype;_proto.generate=function generate(data){var keys=this.keysAccessor(data),i,jj=data.length,ii=keys.length,series=new Array(ii),orders;for(i=0;i<ii;++i){var ki=keys[i],si=new Array(jj),sij=void 0,j=void 0;series[i]=si;for(j=0;j<jj;++j){sij=[0,+this.valueAccessor(data[j],ki,j,data)];sij.data=data[j];si[j]=sij}si.key=ki}orders=this.order(series);for(i=0;i<ii;++i){series[orders[i]].index=i}this.offset(series,orders);return series};_proto.setKeysAccessor=function setKeysAccessor(accessor){if(accessor===void 0){accessor=(0,_constant.default)([])}this.keysAccessor=typeof accessor==="function"?accessor:(0,_constant.default)((0,_isArray.default)(accessor)?accessor.slice():[]);return this};_proto.getKeysAccessor=function getKeysAccessor(){return this.keysAccessor};_proto.setValueAccessor=function setValueAccessor(accessor){if(accessor===void 0){accessor=stackValue}this.valueAccessor=typeof accessor==="function"?accessor:(0,_constant.default)(+accessor);return this};_proto.getValueAccessor=function getValueAccessor(){return this.valueAccessor};_proto.setOrder=function setOrder(order){if(order===void 0){order=_default2.default}this.order=typeof order==="function"?order:(0,_constant.default)((0,_isArray.default)(order)?order.slice():[]);return this};_proto.getOrder=function getOrder(){return this.order};_proto.setOffset=function setOffset(offset){if(offset===void 0){offset=_default3.default}this.offset=offset;return this};_proto.getOffset=function getOffset(){return this.offset};return StackGenerator}();var _default=StackGenerator;exports.default=_default;