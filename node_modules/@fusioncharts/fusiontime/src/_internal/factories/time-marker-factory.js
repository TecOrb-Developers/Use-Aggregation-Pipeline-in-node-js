"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _timeSpanMinMarker=_interopRequireDefault(require("../components/time-span-min-marker"));var _timeSpanFullMarker=_interopRequireDefault(require("../components/time-span-full-marker"));var _timeInstanceMarker=_interopRequireDefault(require("../components/time-instance-marker"));var _pluckNumber=_interopRequireDefault(require("@fusioncharts/utils/src/pluck-number"));var _default=function _default(canvas){var canvasConfig=canvas.config,xConfigs=canvasConfig.xConfigs;if(canvas.config.enableTimeMarkers){xConfigs.forEach((function(xConfig){var timeMarkers=xConfig.timemarker||[],showTimeSpanMarkerTooltipAt=(0,_pluckNumber.default)(xConfig.showtimespanmarkertooltipat,1),columnName=xConfig.plot[0].value,chartConfig=canvas.getFromEnv("chartConfig"),schema=chartConfig.dataTable.getSchema(),defaultFormat=schema.find((function(el){return el.name===columnName})).format,timeSpanMinMarkersConf=[],timeSpanFullMarkersConf=[],timeInstanceMarkersConf=[],chart=canvas.getFromEnv("chart"),scale=canvas.config.xConfigs[0].scale,timeSpanMinMarker,timeSpanFullMarker,timeInstanceMarker;timeMarkers.forEach((function(marker){if(marker.end){if(marker.type==="full"){timeSpanFullMarkersConf.push(marker)}else{timeSpanMinMarkersConf.push(marker)}}else{timeInstanceMarkersConf.push(marker)}}));timeSpanMinMarker=canvas.attachChild(_timeSpanMinMarker.default,"timeSpanMinMarker");timeSpanFullMarker=canvas.attachChild(_timeSpanFullMarker.default,"timeSpanFullMarker");timeSpanMinMarker.configure({timeMarker:timeSpanMinMarkersConf,defaultFormat:defaultFormat,xScale:scale,showTimeSpanMarkerTooltipAt:showTimeSpanMarkerTooltipAt});timeSpanMinMarker.addExtEventListener("timeSpanMinMarkerHovered",(function(e){if(e.data.senderTimeMarker!==timeSpanMinMarker){timeSpanMinMarker.setData({hoveredIndex:e.data.hoveredIndex,hoveredFromOutside:true},true)}}),chart);timeSpanFullMarker.configure({timeMarker:timeSpanFullMarkersConf,defaultFormat:defaultFormat,xScale:scale,showTimeSpanMarkerTooltipAt:showTimeSpanMarkerTooltipAt});timeSpanFullMarker.addExtEventListener("timeSpanFullMarkerHovered",(function(e){if(e.data.senderTimeMarker!==timeSpanFullMarker){timeSpanFullMarker.setData({hoveredIndex:e.data.hoveredIndex,hoveredFromOutside:true},true)}}),chart);timeInstanceMarker=canvas.attachChild(_timeInstanceMarker.default,"timeInstanceMarker");timeInstanceMarker.configure({timeMarker:timeInstanceMarkersConf,defaultFormat:defaultFormat,xScale:scale});timeInstanceMarker.addExtEventListener("timeInstanceMarkerHovered",(function(e){if(e.data.senderTimeMarker!==timeInstanceMarker){timeInstanceMarker.setData({hoveredMarkerIndex:e.data.hoveredMarkerIndex,hoveredDomainIndex:e.data.hoveredDomainIndex,hoveredFromOutside:true},true)}}),chart)}))}};exports.default=_default;