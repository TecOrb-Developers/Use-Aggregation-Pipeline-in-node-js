"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _core=_interopRequireDefault(require("../../../../../fusioncharts/core"));var _index=require("../../../index");var _fcDatatable=_interopRequireDefault(require("../../../../../fc-datatable"));var _utitilies=require("../../../../../../dev-tests/viz/utitilies");_core.default.addDep(_index.TimeSeries);var data=[["2016-10-30 09:00:00","2018-10-30 09:00:00",1,"A",2,13],["2016-10-30 09:30:00","2018-10-30 09:30:00",20,"A",3,49],["2016-10-30 10:00:00","2018-10-30 10:00:00",3,"B",4,25],["2016-10-30 10:30:00","2018-10-30 10:30:00",14,"B",5,60],["2016-10-30 11:00:00","2018-10-30 11:00:00",50,"C",6,17],["2016-10-30 11:30:00","2018-10-30 11:30:00",26,"C",7,80]],schema=[{name:"Time",type:"date",format:"%Y-%m-%d %H:%M:%S"},{name:"Time-2",type:"date",format:"%Y-%m-%d %H:%M:%S"},{name:"Measure1",type:"number"},{name:"Item",type:"string"},{name:"Measure2",type:"number"},{name:"Measure3",type:"number"}];var fusionDataStore=new _fcDatatable.default,fusionTable=fusionDataStore.createDataTable(data,schema);describe("CRS should open",(function(){var chartData={type:"timeseries",renderAt:_utitilies.CONTAINER_ID,width:600,height:400,dataSource:{chart:{},data:fusionTable,xAxis:{plot:"Time-2",title:"xAxisName"},yAxis:[{plot:{value:"Measure1",type:"line"}},{plot:{value:"Measure2",type:"column"}}]}},chart;beforeEach((function(){chart=(0,_utitilies.setup)(_core.default,chartData)}));afterEach((function(){return chart.dispose()}));it("when CRS is switched on twice",(function(done){chart.addEventListener("renderComplete",(function(e){e.detachHandler();var crsTextGroup=document.querySelector('[class$="-range-selector-text"]'),rect=crsTextGroup.getElementsByTagName("rect")[0],mousedownEvent=new Event("mousedown",{bubbles:true}),clickEvent=new Event("click",{bubbles:true});rect.dispatchEvent(mousedownEvent);rect.dispatchEvent(clickEvent);setTimeout((function(){document.dispatchEvent(mousedownEvent);document.dispatchEvent(clickEvent);setTimeout((function(){rect.dispatchEvent(mousedownEvent);rect.dispatchEvent(clickEvent);setTimeout((function(){var crsDiv=document.getElementsByClassName("fc-crs-widget")[0],triangleDiv=crsDiv.children[0];expect(getComputedStyle(triangleDiv).display).not.toBe("none");expect(crsDiv.childElementCount).not.toBe(1);done()}),32)}),32)}),32)}));chart.render()}))}));