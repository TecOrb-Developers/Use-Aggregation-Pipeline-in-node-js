"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _core=_interopRequireDefault(require("../../../../fusioncharts/core"));var _redraphael=_interopRequireDefault(require("../../../../fc-core/src/_internal/redraphael/redraphael"));var _toolbox=require("../../../../fc-core/src/toolbox");var _SmartlabelManager=_interopRequireDefault(require("../../../../fc-core/src/_internal/vendors/fusioncharts-smartlabel/src/SmartlabelManager"));var _standardRangeSelector=_interopRequireDefault(require("./standard-range-selector"));_core.default.addDep(_redraphael.default);function domainValidator(currentDomain,totalDomain,prevDomain){if(prevDomain===void 0){prevDomain=[]}var chart2=this,mode,currentDomainStartValue=currentDomain[0],currentDomainEndValue=currentDomain[1],totalDomainStartValue=totalDomain[0],totalDomainEndValue=totalDomain[1],currentDomainStartValuems=+currentDomain[0],currentDomainEndValuems=+currentDomain[1],totalDomainStartValuems=+totalDomain[0],totalDomainEndValuems=+totalDomain[1];if(prevDomain.length){mode=Math.abs(currentDomainEndValuems-currentDomainStartValuems-(+prevDomain[1]-+prevDomain[0]))>1?"squeeze":"drag"}if(currentDomainStartValuems<totalDomainStartValuems){currentDomainStartValue=totalDomainStartValue;currentDomainEndValue=mode==="drag"?new Date(currentDomainEndValuems+(totalDomainStartValuems-currentDomainStartValuems)):currentDomainEndValue}if(currentDomainEndValuems>totalDomainEndValuems){currentDomainEndValue=totalDomainEndValue;currentDomainStartValue=mode==="drag"?new Date(currentDomainStartValuems-(currentDomainEndValuems-totalDomainEndValuems)):currentDomainStartValue}if(currentDomainEndValuems<totalDomainStartValuems){currentDomainEndValue=totalDomainStartValue}if(currentDomainStartValuems>totalDomainEndValuems){currentDomainStartValue=totalDomainEndValue}if(currentDomainStartValuems>currentDomainEndValuems){var _ref=[currentDomainEndValue,currentDomainStartValue];currentDomainStartValue=_ref[0];currentDomainEndValue=_ref[1]}chart2.zoomTo([currentDomainStartValue,currentDomainEndValue])}describe("FTSRS_TS_2: To verify the dimension of SRS",(function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id},getContextLimit:function getContextLimit(){return{totalDomain:[-217747207e4,766833498e5]}}},chartConfig={contextLimit:[-217747207e4,766833498e5]};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));toolBar=new _toolbox.ToolBar;toolBar.__setDefaultConfig();srs.addToEnv("selectorToolbar",toolBar);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_2:  To verify the size of button and component as a whole.",(function(){srs.__setDefaultConfig();var tempElement={getRangeThreshold:function getRangeThreshold(){},getBinMin:function getBinMin(){}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={},srs.addToEnv("getStyleDef",(function(){return{}}));srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-31536e6),new Date]});var buttons=srs.getToolInfo();var allToolbarId="allToolBar-"+toolBar.getId()+"-"+chart.getId();for(var btns in buttons[allToolbarId]["configuration"]["child"]){var btnConfig=buttons[allToolbarId]["configuration"]["child"][btns]["configuration"];buttonStore.push({config:{text:btnConfig.text,height:btnConfig.height,marginBottom:toolBar.config.marginBottom,marginTop:toolBar.config.marginTop,marginLeft:btnConfig.marginLeft,marginRight:btnConfig.marginRight}})}for(var i=0;i<buttonStore.length;i++){if(buttonStore[i].config.text){expect(Math.ceil(buttonStore[i].config.height)).toBe(15);expect(buttonStore[i].config.marginBottom).toBe(2.5);expect(buttonStore[i].config.marginLeft).toBe(0);expect(buttonStore[i].config.marginRight).toBe(0);expect(buttonStore[i].config.marginTop).toBe(2.5)}}}))}));describe("FTSRS_TS_3: To verify the All button option of SRS",(function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id},getContextLimit:function getContextLimit(){return{totalDomain:[-217747207e4,766833498e5]}}},chartConfig={contextLimit:[-217747207e4,766833498e5]};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel)}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_3:  All button should always be drawn for any data",(function(){srs.__setDefaultConfig();var tempElement={getRangeThreshold:function getRangeThreshold(){},getBinMin:function getBinMin(){}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={},srs.addToEnv("getStyleDef",(function(){return{}}));srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-31536e6),new Date]});var configBtn=srs.getToolInfo();var allToolbarId="allToolBar-"+toolBar.getId()+"-"+chart.getId();buttonStore=configBtn[allToolbarId]["configuration"]["child"]["allButton-"+toolBar.getId()+"-"+chart.getId()+"-0"]["configuration"];expect(buttonStore.text).toBe("All")}))}));describe("FTSRS_TS_4: To verify the End buttons of SRS",(function(){var srs,toolBar,smartLabel,FALSE=false,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id},getContextLimit:function getContextLimit(){return chartConfig.contextLimit}},chartConfig={contextLimit:[+new Date-61536e6,+new Date]};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));srs.addToEnv("UTC",FALSE);toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);var tempElement={getRangeThreshold:function getRangeThreshold(){return["","",1296e6]},getBinMin:function getBinMin(){return["","",36e5]}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={},srs.addToEnv("getStyleDef",(function(){return{}}))}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_5:  For one year or greater data the available end buttons should be YTD, QTD, MTD, WTD",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-5*2592e6),new Date],totalDomain:[new Date(+new Date-61536e6),new Date]});var businessToolbar=srs.getToolInfo()["businessToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in businessToolbar){buttonStore.push(businessToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("YTD");expect(buttonStore[1].text).toBe("QTD");expect(buttonStore[2].text).toBe("MTD");expect(buttonStore[3].text).toBe("WTD")}));it("FTSRS_TC_6:  For data of range beetween 1 year & 3 months the available end buttons should be QTD, MTD, WTD",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-1*2592e6),new Date],totalDomain:[new Date(+new Date-4*2592e6),new Date]});chartConfig.contextLimit=[+new Date-4*2592e6,+new Date];var businessToolbar=srs.getToolInfo()["businessToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in businessToolbar){buttonStore.push(businessToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("QTD");expect(buttonStore[1].text).toBe("MTD");expect(buttonStore[2].text).toBe("WTD")}));it("FTSRS_TC_7:  For data of range beetween 3 months & 1 month the available end buttons should be MTD, WTD",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-1*2592e6),new Date],totalDomain:[new Date(+new Date-2*2592e6),new Date]});chartConfig.contextLimit=[+new Date-2*2592e6,+new Date];var businessToolbar=srs.getToolInfo()["businessToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in businessToolbar){buttonStore.push(businessToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("MTD");expect(buttonStore[1].text).toBe("WTD")}));it("FTSRS_TC_8:  For data of range beetween 1 months & 1 Week the available end buttons should be WTD",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-2552e6),new Date],totalDomain:[new Date(+new Date-2552e6),new Date]});chartConfig.contextLimit=[+new Date-2552e6,+new Date];var businessToolbar=srs.getToolInfo()["businessToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in businessToolbar){buttonStore.push(businessToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("WTD")}));it("FTSRS_TC_9:  For data of range below 1 Week the available end buttons should not be drawn",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:[new Date(+new Date-2e6),new Date],totalDomain:[new Date(+new Date-2e6),new Date]});chartConfig.contextLimit=[+new Date-2e6,+new Date];var businessToolbar=srs.getToolInfo()["businessToolBar-"+toolBar.getId()+"-"+chart.getId()];expect(businessToolbar).toBe(undefined)}))}));describe("FTSRS_TS_5: To verify the dynamic buttons",(function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",getId:function getId(){return this.id},getContextLimit:function getContextLimit(){return chartConfig.contextLimit},getFocusLimit:function getFocusLimit(){return chartConfig.focusLimit}},chartConfig={};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);var tempElement={getRangeThreshold:function getRangeThreshold(){return["","",1296e6]},getBinMin:function getBinMin(){return["","",36e5]}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={},srs.addToEnv("getStyleDef",(function(){return{}}))}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_10:  For active window greater than 6 months the buttons will be 1Y,6M",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-7*2592e6),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1398568732120,1578565132120];chartConfig.focusLimit=[1398568732120,1450134639180];srs.config.currentDomain=[1398568732120,1450134639180];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("3Y");expect(buttonStore[1].text).toBe("2Y");expect(buttonStore[2].text).toBe("1Y")}));it("FTSRS_TC_11:  For active window of 6 months & 3 months the buttons will be 1Y,6M,3M",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-5*2592e6),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1398569640203,1578566040203];chartConfig.focusLimit=[1435728553169,1448742088025];srs.config.currentDomain=[1435728553169,1448742088025];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("1Y");expect(buttonStore[1].text).toBe("6M");expect(buttonStore[2].text).toBe("3M")}));it("FTSRS_TC_12: For active window 3 months & 1 months the buttons will be 6M,3M,1M",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-2*2592e6),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1398569640203,1578566040203];chartConfig.focusLimit=[1435728553169,1439220116577];srs.config.currentDomain=[1435728553169,1439220116577];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("6M");expect(buttonStore[1].text).toBe("3M");expect(buttonStore[2].text).toBe("1M")}));it("FTSRS_TC_13: For active window 1 months & 15 days the buttons will be 6M,3M,1M",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-16*864e5),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1560570649144,1578567049144];chartConfig.focusLimit=[1560570649144,1567416517233];srs.config.currentDomain=[1560570649144,1567416517233];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("6M");expect(buttonStore[1].text).toBe("3M");expect(buttonStore[2].text).toBe("1M")}));it("FTSRS_TC_14: For active window 15 days & 7 days the buttons will be 1M,15D",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-8*864e5),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1560570649144,1578567049144];chartConfig.focusLimit=[1560570649144,1561679983254];srs.config.currentDomain=[1560570649144,1561679983254];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("1M");expect(buttonStore[1].text).toBe("15D")}));it("FTSRS_TC_15: For active window 7 days & 1 day the buttons will be 15D,7D,1D",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-5*864e5),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1560570649144,1578567049144];chartConfig.focusLimit=[1560570649144,1560804528269];srs.config.currentDomain=[1560570649144,1560804528269];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("15D")}));it("FTSRS_TC_16: For active window of 3 hour the button will be [All]",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[new Date(+todaysDate-26e5),todaysDate],totalDomain:[new Date(+todaysDate-12*2592e6),todaysDate]});chartConfig.contextLimit=[1578591066789,1578947466789];chartConfig.focusLimit=[1578775926e3,1578849926e3];var configBtn=srs.getToolInfo();var allToolbarId="allToolBar-"+toolBar.getId()+"-"+chart.getId();buttonStore=configBtn[allToolbarId]["configuration"]["child"]["allButton-"+toolBar.getId()+"-"+chart.getId()+"-0"]["configuration"];expect(buttonStore.text).toBe("All")}));it("FTSRS_TC_17: For blank active window no buttons should be drawn",(function(){srs.__setDefaultConfig();var todaysDate="Thu Jan 09 2020 15:42:41 GMT+0530 (India Standard Time)";srs.configureAttributes({currentDomain:[],totalDomain:[new Date(+todaysDate-13*2592e6),todaysDate]});chartConfig.contextLimit=[0,0];chartConfig.focusLimit=[0,0];srs.config.currentDomain=[0,0];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"]["configuration"];expect(intervalToolbar).toBe(undefined)}))}));describe("FTSRS_TS_8: To verify effect on timeNav window when interaction done with standard range selector buttons",(function(){var srs,toolBar,smartLabel,buttonStore=[],domainStore,chart={id:"chart_1",config:{contextLimit:[1560663748053,1578660148053]},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){domainStore=domain;srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value},getContextLimit:function getContextLimit(){return this.config.contextLimit},getFocusLimit:function getFocusLimit(){return this.config.focusLimit},setFocusLimit:function setFocusLimit(domainArr){this.config.focusLimit=domainArr},fireChartInstanceEvent:function fireChartInstanceEvent(eventName,eventObj){this.zoomTo(this.getFocusLimit())}},chartConfig={contextLimit:[1560663748053,1578660148053]};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);var tempElement={getRangeThreshold:function getRangeThreshold(){return["","",1296e6]},getBinMin:function getBinMin(){return["","",36e5]}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.addToEnv("isUTC",false);srs.addToEnv("animationManager",{setAnimationState:function setAnimationState(){}});srs.config.style={},srs.addToEnv("getStyleDef",(function(){return{}}));chart.addToEnv("focusScalesX",{applicableClippings:{},config:{domain:[new Date("Sun Jun 16 2019 11:12:28 GMT+0530"),new Date("Fri Jan 10 2020 18:12:28 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sun Jun 16 2019 11:12:28 GMT+0530"),new Date("Fri Jan 10 2020 18:12:28 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_23:  On clicking All button active window should be from 5:30AM Feb1 to 8:30PM FEB2",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1560663748053,1578660148053];srs.addToEnv("chart",chart);srs.config.fixedAtStart=true;srs._handler();expect(new Date(domainStore[0]).toString()).toBe(new Date("Sun Jun 16 2019 11:12:28 GMT+0530").toString());expect(new Date(domainStore[1]).toString()).toBe(new Date("Fri Jan 10 2020 18:12:28 GMT+0530").toString())}));it("FTSRS_TC_24:  On clicking 6M button active window should be from 8:30PM Feb1 to 8:30PM FEB2",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1562763423812,1578661023812];srs.addToEnv("chart",chart);srs.config.unit="month";srs.config.multiplier=6;srs._handler();expect(new Date(domainStore[0]).toString()).toBe(new Date("Wed Jul 10 2019 18:27:03 GMT+0530").toString());expect(new Date(domainStore[1]).toString()).toBe(new Date("Fri Jan 10 2020 18:27:03 GMT+0530").toString())}));it("FTSRS_TC_25:  On clicking 15D button active window should be from 8:30AM Feb2 to 8:30PM FEB2",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1577365023812,1578661023812];srs.addToEnv("chart",chart);srs.config.unit="day";srs.config.multiplier=15;srs._handler();expect(new Date(domainStore[0]).toString()).toBe(new Date("Thu Dec 26 2019 18:27:03 GMT+0530 ").toString());expect(new Date(domainStore[1]).toString()).toBe(new Date("Fri Jan 10 2020 18:27:03 GMT+0530").toString())}));it("FTSRS_TC_26:  On clicking 12H button active window should be from 2:30PM Feb2 to 8:30PM FEB2",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1578617823812,1578661023812];srs.addToEnv("chart",chart);srs.config.unit="hour";srs.config.multiplier=12;srs._handler();expect(new Date(domainStore[0]).toString()).toBe(new Date("Fri Jan 10 2020 06:27:03 GMT+0530").toString());expect(new Date(domainStore[1]).toString()).toBe(new Date("Fri Jan 10 2020 18:27:03 GMT+0530").toString())}))}));describe("FTSRS_TS_9: To verify interval buttons of SRS when interaction done with SRS buttons",(function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",config:{contextLimit:[1560658708553,1578655108553]},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value},getContextLimit:function getContextLimit(){return this.config.contextLimit},getFocusLimit:function getFocusLimit(){return this.config.focusLimit}},chartConfig={contextLimit:[1560658708553,1578655108553]};chart.config=chartConfig;beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));var tempElement={getRangeThreshold:function getRangeThreshold(){},getBinMin:function getBinMin(){}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={};srs.addToEnv("getStyleDef",(function(){return{}}));toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sun Jun 16 2019 07:36:42 GMT+0530"),new Date("Fri Jan 10 2020 14:36:42 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sun Jun 16 2019 07:36:42 GMT+0530"),new Date("Fri Jan 10 2020 14:36:42 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}})}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_27:  On clicking All button the available buttons should be [15D, 7D, 1D | All]",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});srs.config.contextRangeThreshold=["","",1728e5];srs.config.contextMinBin=["","",36e5];chart.config.focusLimit=[1560658708553,1578655108553];srs.addToEnv("chart",chart);srs.config.focusRangeThreshold=["","",1728e5];srs.config.focusMinBin=["","",36e5];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("6M")}));it("FTSRS_TC_28:  On clicking 6M button the available buttons should be [7D, 1D, 12H | All]",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});srs.config.contextRangeThreshold=["","",1728e5];srs.config.contextMinBin=["","",36e5];srs.config.currentDomain=[1562757508553,1578655108553];chart.config.focusLimit=[1562757508553,1578655108553];srs.addToEnv("chart",chart);srs.config.focusRangeThreshold=["","",1728e5];srs.config.focusMinBin=["","",36e5];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("6M");expect(buttonStore[1].text).toBe("3M")}));it("FTSRS_TC_29:  On clicking 15D button the available buttons should be [1D, 12H, 6H | All]",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});srs.config.contextRangeThreshold=["","",1728e5];srs.config.focusRangeThreshold=["","",72e5];srs.config.contextMinBin=["","",36e5];srs.config.focusMinBin=["","",36e5];srs.config.currentDomain=[1577359108553,1578655108553];chartConfig.focusLimit=[1577359108553,1578655108553];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("1M");expect(buttonStore[1].text).toBe("15D");expect(buttonStore[2].text).toBe("7D")}));it("FTSRS_TC_30:  On clicking 12H button the available buttons should be [12H, 6H, 3H | All]",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});srs.config.contextRangeThreshold=["","",1728e5];srs.config.focusRangeThreshold=["","",36e5];srs.config.contextMinBin=["","",36e5];srs.config.focusMinBin=["","",36e5];srs.config.currentDomain=[1578611908553,1578655108553];chart.config.focusLimit=[1578611908553,1578655108553];srs.addToEnv("chart",chart);var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("1D");expect(buttonStore[1].text).toBe("12H");expect(buttonStore[2].text).toBe("6H")}))}));describe("FTSRS_TS_10: To verify interval buttons on change of timeNav domains",(function(){var srs,toolBar,smartLabel,buttonStore=[],chart={id:"chart_1",config:{contextLimit:[1560660331443,1578656731443]},getName:function getName(){return"chart"},getId:function getId(){return this.id},domainValidator:domainValidator,zoomTo:function zoomTo(domain){srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value},getContextLimit:function getContextLimit(){return this.config.contextLimit}},chartConfig={contextLimit:[1560660331443,1578656731443]};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);srs.addToEnv("chartConfig",chartConfig);srs.addToEnv("dateAPI",(function(dt,param,utc){return dt["get"+(utc?"UTC":"")+param]()}));toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sun Jun 16 2019 10:15:31 GMT+0530"),new Date("Fri Jan 10 2020 17:15:31 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Sun Jun 16 2019 10:15:31 GMT+0530"),new Date("Fri Jan 10 2020 17:15:31 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});var tempElement={getRangeThreshold:function getRangeThreshold(){return["","",1296e6]},getBinMin:function getBinMin(){return["","",36e5]}};srs.addToEnv("contextBins",[tempElement]);srs.addToEnv("focusBins",[tempElement]);srs.config.style={},srs.config.contextRangeThreshold=["","",1728e5];srs.config.contextMinBin=["","",36e5];srs.addToEnv("getStyleDef",(function(){return{}}))}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_31:  On time navigator range of  10:15AM JUN16 2019 to 5:15PM JAN10 2020, available button should be [6M]",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1560660331443,1578656731443];srs.addToEnv("chart",chart);srs.config.focusRangeThreshold=["","",1728e5];srs.config.focusMinBin=["","",36e5];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("6M")}));it("FTSRS_TC_32:  On time navigator range of  8:30PM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [[7D, 1D, 12H]",(function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sat Feb 01 2014 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1563816577044,1565363638652];srs.addToEnv("chart",chart);srs.config.focusRangeThreshold=["","",108e5];srs.config.focusMinBin=["","",36e5];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("7D");expect(buttonStore[1].text).toBe("1D");expect(buttonStore[2].text).toBe("12H")}));xit("FTSRS_TC_33:  On time navigator range of  8:30PM FEB1 2014 to 8:30PM FEB2 2014, available buttons should be [[7D, 1D, 12H | All]",(function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Sun Feb 02 2014 20:30:00 GMT+0530"),new Date("Sat Feb 02 2014 20:30:00 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});buttonStore=toolBar.getChildren().tool.elemStore;expect(buttonStore[0].config.text).toBe("All")}));it("FTSRS_TC_33b:  On time navigator range of  7:53PM Aug29 2019 to 13:19PM Sep2 2019, available buttons should be [15D, 7D, 1D]",(function(){srs.__setDefaultConfig();chart.addToEnv("focusScalesX",{config:{domain:[new Date("Thu Aug 29 2019 07:53:53 GMT+0530"),new Date("Mon Sep 02 2019 13:19:10 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("Thu Aug 29 2019 07:53:53 GMT+0530"),new Date("Mon Sep 02 2019 13:19:10 GMT+0530")]},getDomain:function getDomain(){return this.config.domain}});srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain()});chart.config.focusLimit=[1567045433754,1567410550139];srs.addToEnv("chart",chart);srs.config.focusRangeThreshold=["","",36e5];srs.config.focusMinBin=["","",36e5];var intervalToolbar=srs.getToolInfo()["intervalToolBar-"+toolBar.getId()+"-"+chart.getId()]["configuration"]["child"];for(var child in intervalToolbar){buttonStore.push(intervalToolbar[child]["configuration"])}expect(buttonStore[0].text).toBe("15D");expect(buttonStore[1].text).toBe("7D");expect(buttonStore[2].text).toBe("1D")}))}));describe("FTSRS_TS_11: To verify effect on timeNav window when interaction done with tillDate  buttons",(function(){var srs,toolBar,smartLabel,domainStore,buttonStore=[],chart={id:"chart_1",config:{},getName:function getName(){return"chart"},getId:function getId(){return this.id},getFocusLimit:function getFocusLimit(){return[+new Date("May 04, 2014 11:00:00"),+new Date("January 15, 2020 11:00:00")]},getContextLimit:function getContextLimit(){return[+new Date("May 04, 2014 11:00:00"),+new Date("January 15, 2020 11:00:00")]},fireChartInstanceEvent:function fireChartInstanceEvent(){return{}},setFocusLimit:function setFocusLimit(domainArr){srs.config.startDomain=+domainArr[0];srs.config.endDomain=+domainArr[1]},domainValidator:domainValidator,zoomTo:function zoomTo(domain){domainStore=domain;srs.configure({currentDomain:domain})},getFromEnv:function getFromEnv(param){return[this.config[param]]},addToEnv:function addToEnv(name,value){this.config[name]=value}};beforeEach((function(){srs=new _standardRangeSelector.default;srs.addToEnv("chart",chart);toolBar=new _toolbox.ToolBar;srs.addToEnv("selectorToolbar",toolBar);toolBar.addToEnv("chart",chart);smartLabel=new _SmartlabelManager.default(document.body||document.getElementsByTagName("body")[0]);_SmartlabelManager.default.prototype.getSmartText=function(text){return text};srs.addToEnv("smartLabel",smartLabel);srs.addToEnv("contextBins",[{getRangeThreshold:function getRangeThreshold(){return[{},15,1296e6]},getBinMin:function getBinMin(){return[{},1,36e5,true]}}]);srs.addToEnv("focusBins",[{getRangeThreshold:function getRangeThreshold(){return[{},15,1296e6]},getBinMin:function getBinMin(){return[{},1,36e5,true]}}]);srs.addToEnv("baseTextStyle",{"font-family":"Arial"});srs.addToEnv("animationManager",{setAnimationState:function setAnimationState(x){return x}});srs.addToEnv("getStyleDef",(function(){return{}}));chart.addToEnv("focusScalesX",{applicableClippings:{},config:{domain:[new Date("May 04, 2014 11:00:00"),new Date("January 15, 2020 11:00:00")]},getDomain:function getDomain(){return this.config.domain}});chart.addToEnv("contextScalesX",{config:{domain:[new Date("May 04, 2014 11:00:00"),new Date("January 15, 2020 11:00:00")]},getDomain:function getDomain(){return this.config.domain}})}));afterEach((function(){srs=undefined;toolBar=undefined;smartLabel=undefined;buttonStore=[]}));it("FTSRS_TC_34:  To check time navigator range when YTD is clicked.",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain(),style:{}});srs.config.unit="year";srs.config.multiplier=1;srs.config.fixedAtEnd=true;srs.config.fixedAtStart=false;srs._handler();expect(srs.config.startDomain).toBe(+new Date("January 1, 2020 00:00:00"));expect(srs.config.endDomain).toBe(+new Date("January 15, 2020 11:00:00"))}));it("FTSRS_TC_35:  To check time navigator range when QTD is clicked.",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain(),style:{}});srs.config.unit="month";srs.config.multiplier=3;srs.config.fixedAtEnd=true;srs.config.fixedAtStart=false;srs._handler();expect(srs.config.startDomain).toBe(+new Date("January 1, 2020 00:00:00"));expect(srs.config.endDomain).toBe(+new Date("January 15, 2020 11:00:00"))}));it("FTSRS_TC_36:  To check time navigator range when MTD is clicked.",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain(),style:{}});srs.config.unit="month";srs.config.multiplier=1;srs.config.fixedAtEnd=true;srs.config.fixedAtStart=false;srs._handler();expect(srs.config.startDomain).toBe(+new Date("January 1, 2020 00:00:00"));expect(srs.config.endDomain).toBe(+new Date("January 15, 2020 11:00:00"))}));xit("FTSRS_TC_37:  To check time navigator range when WTD is clicked.",(function(){srs.__setDefaultConfig();srs.configureAttributes({currentDomain:chart.getFromEnv("focusScalesX")[0].getDomain(),totalDomain:chart.getFromEnv("contextScalesX")[0].getDomain(),style:{}});srs.config.unit="day";srs.config.multiplier=7;srs.config.fixedAtEnd=true;srs.config.fixedAtStart=false;srs._handler();expect(srs.config.startDomain).toBe(+new Date("January 12, 2020 00:00:00"));expect(srs.config.endDomain).toBe(+new Date("January 15, 2020 11:00:00"))}))}));