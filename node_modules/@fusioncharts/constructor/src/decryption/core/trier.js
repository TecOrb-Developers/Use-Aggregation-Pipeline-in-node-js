"use strict";exports.__esModule=true;exports.default=void 0;var Trier=function(){function Trier(){}var _proto=Trier.prototype;_proto.trierFirst=function trierFirst(chartObj,trierKey,isCreditLabel,releaseDt,utilityArrSet,moduleChartMapper){var trierObj=this._trierStraightner(trierKey);if(trierObj){var mapObjArr=utilityArrSet.filter((function(utilityModel){return utilityModel.utility_version===trierObj.luv}));if(mapObjArr&&mapObjArr.length>0){var mapObj=mapObjArr[0],isTrierDateValid=this._trierDateMapper(trierObj,mapObj,releaseDt);if(isTrierDateValid){var validProductObj=this._trierProductMapper(trierObj,mapObj);if(validProductObj){var isModuleValid=this._trierModuleMapper(trierObj,mapObj,chartObj.chartType(),validProductObj,moduleChartMapper);if(isModuleValid){var isDomainValid=false;var isMobileDevice=/Android|iPhone|iPad|iPod|Mobile/i.test(navigator.userAgent),match=window.location.href.match(/:\/\/(www[0-9]?\.)?((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?:(?![\/:])[\s\S])+)/);if(isMobileDevice&&!match){isDomainValid=true}else{isDomainValid=this._trierDomainMapper(trierObj,mapObj)}if(isDomainValid&&!isCreditLabel){this._trierValidator(chartObj);return}}}}}}chartObj.apiInstance._drawMain(true);return false};return Trier}();exports.default=Trier;Trier.prototype._trierValidator=function(chartObj){var targetNumber=Math.floor(Math.random()*12)+2,lengthCheck=chartObj.apiInstance.getName().length;for(var index=0;index<lengthCheck+targetNumber;index++){if(index===lengthCheck){chartObj.apiInstance.removeJob("checker")}else if(index===lengthCheck+1){this.chartGenMinimizer(chartObj.apiInstance)}}};Trier.prototype.chartGenMinimizer=function(instance){if(instance.config.observer){instance.config.observer.disconnect();this.elementReprocator(instance)}};Trier.prototype._sumDigits=function(number){var str=number.toString();var sum=0;for(var i=0;i<str.length;i++){sum+=parseInt(str.charAt(i),10)}if(sum>10){return sum%9+1}return sum};Trier.prototype._fromRange=function(charCode,ks,i){var param=Math.abs(i),cCode=charCode;while(param-- >0){cCode-=ks}if(i<0){cCode+=123}return cCode};Trier.prototype._foo=function(x){return x};Trier.prototype._trierStraightner=function(str){if(!str){return str}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var decrypted="",key=chars.indexOf(str[0]);var _bar=this._foo("charCodeAt"),_car=this._foo("fromCharCode");for(var i=1;i<str.length-2;i++){var ks=this._sumDigits(++key);var charCode=str[_bar](i),t="";while(/[0-9-]/.test(str[i+1])){t+=str[++i]}t=parseInt(t,10)||0;charCode=this._fromRange(charCode,ks,t);charCode^=key-1&31;decrypted+=String[_car](charCode)}try{return JSON.parse(decrypted)}catch(_unused){return null}};Trier.prototype._trierDateMapper=function(trierObj,mapObj,releaseDt){var trierEndDate=trierObj[mapObj.map.endDate],currentDomain=window.location.hostname,minimuDateCheck=45,currentDate=new Date;var isLocalHost=false;if(currentDomain==="localhost"||currentDomain==="127.0.0.1"||currentDomain==="0.0.0.0"){isLocalHost=true}if(trierObj[mapObj.map.startDate]&&trierEndDate&&!trierObj[mapObj.map.isUpgrade]){var releaseDate=new Date(releaseDt),endDate=new Date(trierEndDate);if(releaseDate>endDate){return false}if(isLocalHost&&currentDate<endDate){var daysDiff=Math.round((endDate.getTime()-currentDate.getTime())/(24*60*60*1e3));if(daysDiff<=minimuDateCheck){console.warn("Your FusionCharts license is expiring in "+daysDiff+" day(s), please renew to get upgrades and support.")}}return true}else if(trierObj[mapObj.map.startDate]&&trierEndDate&&trierObj[mapObj.map.isUpgrade]){return true}else if(trierEndDate){var _endDate=new Date(trierEndDate);if(currentDate>_endDate){return false}if(isLocalHost&&currentDate<_endDate){var _daysDiff=Math.round((_endDate.getTime()-currentDate.getTime())/(24*60*60*1e3));if(_daysDiff<=minimuDateCheck){console.warn("Your FusionCharts license is expiring in "+_daysDiff+" day(s), please renew.")}}return true}return false};Trier.prototype._trierProductMapper=function(trierObj,mapObj){var trierProductName=trierObj[mapObj.map.products];if(trierProductName){var targetProductObject=mapObj.products.filter((function(prod){return prod.name===trierProductName}));if(targetProductObject&&targetProductObject.length>0){return targetProductObject[0]}return null}return null};Trier.prototype._trierModuleMapper=function(trierObj,mapObj,chartType,productObj,moduleChartMapper){var trierModules=trierObj[mapObj.map.modules];if(productObj.name==="fcs"){if(trierModules.length>0){for(var index=0;index<trierModules.length;index++){var moduleName=productObj.modules[trierModules[index]];if(moduleName){if(moduleName==="fusionChartsSuite"){if(moduleChartMapper.fusionCharts.indexOf(chartType)>-1||moduleChartMapper.powerCharts.indexOf(chartType)>-1||moduleChartMapper.fusionWidgets.indexOf(chartType)>-1||moduleChartMapper.fusionMaps.indexOf(chartType)>-1){return true}}else if(moduleChartMapper[moduleName].indexOf(chartType)>-1){return true}}}return false}return false}return false};Trier.prototype.elementReprocator=function(instance){instance.removeContainer("creditgroup")};Trier.prototype._trierDomainMapper=function(trierObj,mapObj){var trierDomain=trierObj[mapObj.map.domain]||"a",currentDomain=this._hostFetcher();if(!currentDomain){return false}if(currentDomain==="localhost"||currentDomain==="127.0.0.1"||currentDomain==="0.0.0.0"){return true}if(trierDomain&&trierDomain!=="a"){var trierDomainArr=trierDomain.split(",");var isValidDomain=false;for(var index=0;index<trierDomainArr.length;index++){var domainItem=trierDomainArr[index].trim().toLowerCase();if(currentDomain.indexOf(domainItem)>-1){isValidDomain=true;break}}return isValidDomain}else if(trierDomain==="a"){return true}return false};Trier.prototype._hostFetcher=function(){var match=window.location.href.match(/:\/\/(www[0-9]?\.)?((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])(?:(?![\/:])[\s\S])+)/);if(match!=null&&match.length>2&&typeof match[2]==="string"&&match[2].length>0){return match[2].toLowerCase()}return null};