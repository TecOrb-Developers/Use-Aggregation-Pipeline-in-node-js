"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _scatter=_interopRequireDefault(require("@fusioncharts/charts/src/dataset/scatter"));var _lib=require("@fusioncharts/core/src/lib");var _dependencyManager=require("@fusioncharts/core/src/dependency-manager");var _index=_interopRequireDefault(require("./index.animation"));var COLOR_FFFFFF="FFFFFF",XY_STR="xy",altHGridColorStr=_lib.preDefStr.altHGridColorStr,altHGridAlphaStr=_lib.preDefStr.altHGridAlphaStr;(0,_dependencyManager.addDep)({name:"selectScatterAnimation",type:"animationRule",extension:_index.default});var SelectScatterDataset=function(_ScatterDataset){(0,_inheritsLoose2.default)(SelectScatterDataset,_ScatterDataset);function SelectScatterDataset(){return _ScatterDataset.apply(this,arguments)||this}var _proto=SelectScatterDataset.prototype;_proto.getType=function getType(){return"dataset"};_proto.getName=function getName(){return"selectScatter"};_proto.configure=function configure(datasetJSON){_ScatterDataset.prototype.configure.call(this,datasetJSON);var dataSet=this,chart=dataSet.getFromEnv("chart"),chartConfig=chart.config,chartAttr=chart.getFromEnv("dataSource").chart,colorM=dataSet.getFromEnv("color-manager"),borderColor=(0,_lib.pluck)(chartAttr.selectbordercolor,colorM.getColor("canvasBorderColor")),borderAlpha=(0,_lib.pluckNumber)(chartAttr.selectborderalpha,colorM.getColor("canvasBorderAlpha"));chartConfig.selectBorderColor={FCcolor:{color:borderColor,alpha:borderAlpha}};chartConfig.selectFillColor=(0,_lib.convertColor)((0,_lib.pluck)(chartAttr.selectfillcolor,colorM.getColor(altHGridColorStr)),(0,_lib.pluckNumber)(chartAttr.selectfillalpha,colorM.getColor(altHGridAlphaStr)));chartConfig.selectionCancelButtonBorderColor=(0,_lib.convertColor)((0,_lib.pluck)(chartAttr.selectioncancelbuttonbordercolor,borderColor),(0,_lib.pluckNumber)(chartAttr.selectioncancelbuttonborderalpha,borderAlpha));chartConfig.selectionCancelButtonFillColor=(0,_lib.convertColor)((0,_lib.pluck)(chartAttr.selectioncancelbuttonfillcolor,COLOR_FFFFFF),(0,_lib.pluckNumber)(chartAttr.selectioncancelbuttonfillalpha,100));chartConfig.connativeZoom=false;chartConfig.zoomType=XY_STR;if(chartAttr.submitdataasxml===_lib.ZEROSTRING&&!chartAttr.formdataformat){chartAttr.formdataformat=(0,_dependencyManager.getDepsByType)("transcoder").csv&&"csv"}chartConfig.formDataFormat=(0,_lib.pluck)(chartAttr.formdataformat);chartConfig.formTarget=(0,_lib.pluck)(chartAttr.formtarget,"_self");chartConfig.formMethod=(0,_lib.pluck)(chartAttr.formmethod,"POST");chartConfig.submitFormAsAjax=(0,_lib.pluckNumber)(chartAttr.submitformusingajax,1)};_proto.draw=function draw(){_ScatterDataset.prototype.draw.call(this);var dataSet=this,chart=dataSet.getFromEnv("chart"),container=chart.getFromEnv("chart-container"),xAxis=dataSet.getFromEnv("xAxis"),yAxis=dataSet.getFromEnv("yAxis");(0,_lib.bindSelectionEvent)(chart,{selectionStart:function selectionStart(data){var pos=(0,_lib.getMouseCoordinate)(container,data.originalEvent,chart),eventArgs=(0,_lib.extend2)({selectionLeft:data.selectionLeft,selectionTop:data.selectionTop,selectionWidth:data.selectionWidth,selectionHeight:data.selectionHeight,startXValue:xAxis.getValue(data.selectionLeft,1),startYValue:yAxis.getValue(data.selectionTop,1)},pos);data.chart.fireChartInstanceEvent("selectionStart",eventArgs)},selectionEnd:function selectionEnd(data){var pos=(0,_lib.getMouseCoordinate)(container,data.originalEvent,chart),eventArgs=(0,_lib.extend2)({selectionLeft:data.selectionLeft,selectionTop:data.selectionTop,selectionWidth:data.selectionWidth,selectionHeight:data.selectionHeight,startXValue:xAxis.getValue(data.selectionLeft,1),startYValue:yAxis.getValue(data.selectionTop,1),endXValue:xAxis.getValue(data.selectionLeft+data.selectionWidth,1),endYValue:yAxis.getValue(data.selectionTop+data.selectionHeight,1)},pos);data.chart.fireChartInstanceEvent("selectionEnd",eventArgs);data.chart.createSelectionBox(data)}})};return SelectScatterDataset}(_scatter.default);var _default=SelectScatterDataset;exports.default=_default;