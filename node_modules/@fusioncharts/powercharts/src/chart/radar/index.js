"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _msarea=_interopRequireDefault(require("@fusioncharts/charts/src/chart/msarea"));var _radar=_interopRequireDefault(require("../../dataset/radar"));var _radarAxis=_interopRequireDefault(require("../../factories/radar-axis"));var _polarCanvas=_interopRequireDefault(require("../../factories/polar-canvas"));var _lib=require("@fusioncharts/core/src/lib");var POLAR="polar";var Radar=function(_Area){(0,_inheritsLoose2.default)(Radar,_Area);function Radar(){var _this;_this=_Area.call(this)||this;_this.registerFactory("canvas",_polarCanvas.default);_this.registerFactory("axis",_radarAxis.default,["canvas"]);return _this}var _proto=Radar.prototype;_proto.configureAttributes=function configureAttributes(obj){this.config.drawfullareaborder=1;this.config.radarRadius=(0,_lib.pluckNumber)(obj.chart.radarradius);_Area.prototype.configureAttributes.call(this,obj);this.config.alignLegendWithCanvas=0};_proto.__setDefaultConfig=function __setDefaultConfig(){_Area.prototype.__setDefaultConfig.call(this);var config=this.config;config.axisType=POLAR;config.axisValuePadding=10;config.gridLineWidth=1;config.showRadarBorder=1;config.showvalues=0;config.radarBorderThickness=2;config.skipCanvasDrawing=true;config.useplotgradientcolor=0;config.plotfillalpha=50};_proto.setAxisDimention=function setAxisDimention(){this.getChildren("yAxis")};_proto._feedAxesRawData=function _feedAxesRawData(){var iapi=this,dataObj=iapi.getFromEnv("dataSource"),xAxisConf,yAxisConf;xAxisConf=iapi.getSpecificxAxisConf();yAxisConf=iapi.getSpecificyAxisConf();xAxisConf.vtrendlines=dataObj.vtrendlines;yAxisConf.trendlines=dataObj.trendlines;return{xAxisConf:[xAxisConf],yAxisConf:[yAxisConf]}};_proto.getSpecificxAxisConf=function getSpecificxAxisConf(){var iapi=this,chartAttrs=iapi.getFromEnv("chart-attrib"),xAxisConf=this.getBasexAxisConf();xAxisConf.isReverse=iapi.config.reverseXAxis;xAxisConf.axisLineColor=(0,_lib.pluck)(chartAttrs.xaxislinecolor,chartAttrs.axislinecolor,"#000000");xAxisConf.showAlternateGridColor=(0,_lib.pluckNumber)(chartAttrs.showalternatevgridcolor,1);xAxisConf.numDivLines=chartAttrs.numvdivlines;xAxisConf.axisName=chartAttrs.xaxisname;xAxisConf.setAdaptiveMin=chartAttrs.setadaptivexmin;xAxisConf.showLimits=chartAttrs.showvlimits;xAxisConf.showDivLineValues=(0,_lib.pluckNumber)(chartAttrs.showvdivlinevalues,chartAttrs.showvdivlinevalues);xAxisConf.zeroPlaneThickness=chartAttrs.vzeroplanethickness;xAxisConf.zeroPlaneAlpha=chartAttrs.vzeroplanealpha;xAxisConf.showZeroPlaneValue=chartAttrs.showvzeroplanevalue;xAxisConf.showAxisLine=(0,_lib.pluckNumber)(chartAttrs.showxaxisline,chartAttrs.showaxislines,chartAttrs.drawAxisLines,0);xAxisConf.showRadarBorder=chartAttrs.showradarborder;xAxisConf.radarBorderColor=chartAttrs.radarbordercolor;xAxisConf.radarBorderThickness=chartAttrs.radarborderthickness;xAxisConf.radarBorderAlpha=chartAttrs.radarborderalpha;xAxisConf.radarFillColor=chartAttrs.radarfillcolor;xAxisConf.radarFillAlpha=chartAttrs.radarfillalpha;xAxisConf.radarSpikeColor=chartAttrs.radarspikecolor;xAxisConf.radarSpikeThickness=chartAttrs.radarspikethickness;xAxisConf.radarSpikeAlpha=chartAttrs.radarspikealpha;xAxisConf.radarInLineAlpha=chartAttrs.radarinlinealpha;xAxisConf.showTooltip=(0,_lib.pluckNumber)(chartAttrs.showtooltip,1);return xAxisConf};_proto.getSpecificyAxisConf=function getSpecificyAxisConf(){var iapi=this,chartAttrs=iapi.getFromEnv("chart-attrib"),chartConfig=iapi.config,palleteString=chartConfig.is3D?_lib.chartPaletteStr.chart3D:_lib.chartPaletteStr.chart2D,colorM=iapi.getFromEnv("color-manager"),outCanfontSizeWithUnit=(0,_lib.pluckFontSizeMaintainUnit)(chartAttrs.outcnvbasefontsize,chartAttrs.basefontsize,10);return{isVertical:true,isReverse:!chartConfig.isInverse,isOpposit:false,outCanfontFamily:(0,_lib.pluck)(chartAttrs.outcnvbasefont,chartAttrs.basefont,"Verdana,sans"),outCanfontSize:this.computeFontSize(outCanfontSizeWithUnit),outCanfontSizeWithUnit:outCanfontSizeWithUnit,outCancolor:(0,_lib.pluck)(chartAttrs.outcnvbasefontcolor,chartAttrs.basefontcolor,colorM.getColor(palleteString.baseFontColor)).replace(/^#? ([a-f0-9]+)/gi,"#$1"),axisNamePadding:chartAttrs.yaxisnamepadding,axisValuePadding:chartAttrs.yaxisvaluespadding,axisNameFont:chartAttrs.yaxisnamefont,axisNameFontSize:this.computeFontSize(chartAttrs.yaxisnamefontsize),axisNameFontSizeWithUnit:chartAttrs.yaxisnamefontsize,axisNameFontColor:chartAttrs.yaxisnamefontcolor,axisNameFontBold:chartAttrs.yaxisnamefontbold,axisNameFontItalic:chartAttrs.yaxisnamefontitalic,axisNameBgColor:chartAttrs.yaxisnamebgcolor,axisNameBorderColor:chartAttrs.yaxisnamebordercolor,axisNameAlpha:chartAttrs.yaxisnamealpha,axisNameFontAlpha:chartAttrs.yaxisnamefontalpha,axisNameBgAlpha:chartAttrs.yaxisnamebgalpha,axisNameBorderAlpha:chartAttrs.yaxisnameborderalpha,axisNameBorderPadding:chartAttrs.yaxisnameborderpadding,axisNameBorderRadius:chartAttrs.yaxisnameborderradius,axisNameBorderThickness:chartAttrs.yaxisnameborderthickness,axisNameBorderDashed:chartAttrs.yaxisnameborderdashed,axisNameBorderDashLen:chartAttrs.yaxisnameborderdashlen,axisNameBorderDashGap:chartAttrs.yaxisnameborderdashgap,axisNameWidth:chartAttrs.yaxisnamewidth,useEllipsesWhenOverflow:chartAttrs.useellipseswhenoverflow,rotateAxisName:(0,_lib.pluckNumber)(chartAttrs.rotateyaxisname,1),divLineColor:(0,_lib.pluck)(chartAttrs.divlinecolor,colorM.getColor(palleteString.divLineColor)),divLineAlpha:(0,_lib.pluck)(chartAttrs.divlinealpha,colorM.getColor("divLineAlpha")),divLineThickness:(0,_lib.pluckNumber)(chartAttrs.divlinethickness,1),divLineIsDashed:Boolean((0,_lib.pluckNumber)(chartAttrs.divlinedashed,chartAttrs.divlineisdashed,0)),divLineDashLen:(0,_lib.pluckNumber)(chartAttrs.divlinedashlen,4),divLineDashGap:(0,_lib.pluckNumber)(chartAttrs.divlinedashgap,2),showAlternateGridColor:(0,_lib.pluckNumber)(chartAttrs.showalternatehgridcolor,1),alternateGridColor:(0,_lib.pluck)(chartAttrs.alternatehgridcolor,colorM.getColor("altHGridColor")),alternateGridAlpha:(0,_lib.pluck)(chartAttrs.alternatehgridalpha,colorM.getColor("altHGridAlpha")),numDivLines:chartAttrs.numdivlines,axisMinValue:chartAttrs.yaxisminvalue,axisMaxValue:chartAttrs.yaxismaxvalue,setAdaptiveMin:chartAttrs.setadaptiveymin,adjustDiv:chartAttrs.adjustvdiv,labelStep:chartAttrs.yaxisvaluesstep,showAxisValues:(0,_lib.pluckNumber)(chartAttrs.showyaxisvalues,chartAttrs.showyaxisvalue),showLimits:(0,_lib.pluckNumber)(chartAttrs.showyaxislimits,chartAttrs.showlimits,iapi.showLimits),showDivLineValues:(0,_lib.pluckNumber)(chartAttrs.showdivlinevalues,chartAttrs.showdivlinevalue),zeroPlaneColor:chartAttrs.zeroplanecolor,zeroPlaneThickness:(0,_lib.pluckNumber)(chartAttrs.zeroplanethickness,chartAttrs.divlinethickness,2),zeroPlaneAlpha:chartAttrs.zeroplanealpha,showZeroPlaneValue:chartAttrs.showzeroplanevalue,trendlineColor:chartAttrs.trendlinecolor,trendlineToolText:chartAttrs.trendlinetooltext,trendlineThickness:chartAttrs.trendlinethickness,trendlineAlpha:chartAttrs.trendlinealpha,showTrendlinesOnTop:chartAttrs.showtrendlinesontop,axisLineThickness:(0,_lib.pluckNumber)(chartAttrs.yaxislinethickness,chartAttrs.axislinethickness,1),axisLineAlpha:(0,_lib.pluckNumber)(chartAttrs.yaxislinealpha,chartAttrs.axislinealpha,100),axisLineColor:(0,_lib.pluck)(chartAttrs.yaxislinecolor,chartAttrs.axislinecolor,"#000000"),showTooltip:(0,_lib.pluckNumber)(chartAttrs.showtooltip,1)}};_proto._spaceManager=function _spaceManager(){var spaceForActionBar,actionBarSpace,availableWidth,availableHeight,iapi=this,config=iapi.config,chartAttr=iapi.getFromEnv("chart-attrib"),radarBorderThickness=config.radarBorderThickness,legendPosition=config.legendPosition?config.legendposition.split("-"):[],xAxis=iapi.getChildren("xAxis")&&iapi.getChildren("xAxis")[0],yAxisArr=iapi.getChildren("yAxis")&&iapi.getChildren("yAxis")||[],yAxis=yAxisArr[0],legend=iapi.getChildren("legend")&&iapi.getChildren("legend")[0],allottedSpace,decreaseCanvasBy,POSITION_BOTTOM=_lib.preDefStr.POSITION_BOTTOM,math=Math,mathMin=math.min,mathMax=math.max,mathAbs=math.abs,remainingSpace,radarRadius;config.radarRadius=(0,_lib.pluckNumber)(chartAttr.radarradius);if(config.radarRadius!==_lib.UNDEF){config.radarRadius=config.radarRadius>mathMin(config.canvasHeight,config.canvasWidth)/2?mathMin(config.canvasHeight,config.canvasWidth)/2:config.radarRadius;config.availableHeight=availableHeight=config.canvasHeight-config.radarRadius*2;config.availableWidth=availableWidth=config.canvasWidth-config.radarRadius*2}else{config.availableHeight=availableHeight=config.canvasHeight*.7;config.availableWidth=availableWidth=config.canvasWidth*.7}allottedSpace=(legendPosition[0]===_lib.POSITION_TOP||legendPosition[0]===POSITION_BOTTOM?availableHeight:availableWidth)*.3;allottedSpace=legendPosition[0]===_lib.POSITION_TOP||legendPosition[0]===POSITION_BOTTOM?availableHeight:availableWidth;if(config.hasLegend!==false&&xAxis&&config.showLegend){remainingSpace=legend._manageLegendPosition(allottedSpace);remainingSpace.bottom=mathMin(mathMax(remainingSpace.bottom,0),allottedSpace);remainingSpace.right=mathMin(mathMax(remainingSpace.right,0),allottedSpace);remainingSpace.top=mathMin(mathMax(remainingSpace.top,0),allottedSpace);remainingSpace.left=mathMin(mathMax(remainingSpace.left,0),allottedSpace);iapi._allocateSpace(remainingSpace)}if(xAxis){remainingSpace=xAxis.placeAxis(config.availableWidth,config.availableHeight);iapi._allocateSpace(remainingSpace)}if(yAxis){remainingSpace=yAxis.placeAxis(config.canvasWidth)}remainingSpace=iapi._manageChartMenuBar(config.availableHeight);spaceForActionBar=config.availableHeight*.225;actionBarSpace=iapi._manageActionBarSpace&&(iapi._manageActionBarSpace(spaceForActionBar)||{});iapi._allocateSpace(actionBarSpace);radarRadius=config.radarRadius>0?config.radarRadius*2:mathMin(config.canvasHeight,config.canvasWidth);if(config.canvasHeight>radarRadius){decreaseCanvasBy=mathAbs((config.canvasHeight-radarRadius)/2);iapi._allocateSpace({top:decreaseCanvasBy,bottom:decreaseCanvasBy})}if(config.canvasWidth>radarRadius){decreaseCanvasBy=mathAbs((config.canvasWidth-radarRadius)/2);iapi._allocateSpace({left:decreaseCanvasBy,right:decreaseCanvasBy})}radarRadius=radarRadius/2;yAxis.setAxisDimention({x:config.canvasLeft+config.canvasWidth/2,y:config.canvasTop+config.canvasHeight/2-(radarRadius-radarBorderThickness/2),axisLength:radarRadius-radarBorderThickness/2});xAxis.setAxisConfig({radius:radarRadius-radarBorderThickness/2});xAxis.setAxisDimention({x:config.canvasLeft+config.canvasWidth/2,y:config.canvasTop+config.canvasHeight/2})};Radar.getName=function getName(){return"Radar"};_proto.getName=function getName(){return"Radar"};_proto.getDSdef=function getDSdef(){return _radar.default};return Radar}(_msarea.default);var _default=Radar;exports.default=_default;